(()=>{"use strict";function t(t,e){var n=function(t){"Escape"===t.key&&modalState.open&&(t.preventDefault(),e.click())};t?window.removeEventListener("keydown",n):window.addEventListener("keydown",n)}function e(t,e,n){t?e.removeEventListener("click",n):e.addEventListener("click",n)}function n(t){if(!t)throw new Error("Invalid modal state object passed to toggleModalState function.");t.open=!t.open,t.listenerAttached=!t.listenerAttached,t.escapeKeyListenerAttached=!t.escapeKeyListenerAttached,t.closeButtonState.listenerAttached=!t.closeButtonState.listenerAttached}function o(t){"true"===t.getAttribute("aria-hidden")?(t.setAttribute("aria-hidden","false"),t.setAttribute("aria-modal","true")):(t.setAttribute("aria-hidden","true"),t.setAttribute("aria-modal","false"))}function a(t){t.forEach((function(t){var e=Math.random();t.style.transform=e>=0&&e<.25?"translate(".concat(Math.floor(333*Math.random()),"px, ").concat(Math.floor(333*Math.random()),"px)"):e>=.25&&e<.5?"translate(".concat(Math.floor(-333*Math.random()),"px, ").concat(Math.floor(-333*Math.random()),"px)"):e>=.5&&e<.75?"translate(".concat(Math.floor(333*Math.random()),"px, ").concat(Math.floor(-333*Math.random()),"px)"):"translate(".concat(Math.floor(-333*Math.random()),"px, ").concat(Math.floor(333*Math.random()),"px)")}))}var r,c,i,l,s,d,u,h,f;u=document.querySelector("#c-container"),h=u.querySelector("pre"),r=h,(c=document.createElement("pre")).appendChild((i=r,l=document.createDocumentFragment(),i.textContent.split("").forEach((function(t,e){var n=document.createElement("span");n.setAttribute("id","".concat("character","-").concat(e+1)),n.classList.add("character"),n.textContent=" "===t?" ":t,l.appendChild(n)})),l)),s=f=c,d=h,u.replaceChild(s,d),a(function(t){for(var e=[],n=0;n<t.children.length;n++){var o=t.children[n];""!==o.textContent.trim()&&e.push(o)}return e.forEach((function(t){return t.classList.add("non-whitespace")})),e}(f)),window.addEventListener("load",(function(){var t=document.querySelectorAll(".character.non-whitespace");!function(t){document.querySelector("#open-modal-button").addEventListener("click",(function(){t.forEach((function(t){return t.style.transform="translate(0, 0)"}))}))}(t),function(t){document.querySelector(".ds-close-button").addEventListener("click",(function(){a(t)}))}(t)}));var m=function(a){var r;!function(t){if(!t)throw new Error("Invalid argument passed to dsCreateDialogController function.");if(!(t instanceof HTMLElement))throw new Error("The provided argument is not a valid HTML element.");if("DIALOG"!==t.tagName)throw new Error("The element you passed in is not a dialog element.")}(a),(r=a).setAttribute("aria-modal","false"),r.setAttribute("aria-hidden","true");var c=function(t){return t.id?"#".concat(t.id):t.className?".".concat(t.className.split(" ").join(".")):"specified element"}(a),i=a.querySelector(".ds-close-button");(function(t,e){if(!t)throw new Error("Close button not found for the modal element: ".concat(e,"… Double check to ensure it has a class of '.ds-close-button'."));if("BUTTON"!==t.tagName)throw new Error("The close button for the modal element: ".concat(e," is not a button element."))})(i,c),function(t){t.setAttribute("aria-label","Close Dialog")}(i);var l={open:!1,listenerAttached:!1,escapeKeyListenerAttached:!1,closeButtonState:{listenerAttached:!1}},s=function r(){a.classList.remove("closing"),a.close(),o(a),e(l.closeButtonState.listenerAttached,i,d),t(l.escapeKeyListenerAttached,i),a.removeEventListener("animationend",r),n(l)},d=function(){a.classList.add("closing"),a.addEventListener("animationend",s)};return{openDialog:function(){!function(){if(a.open)throw new Error("The following dialog is already open: ".concat(c,"."));if(l.listenerAttached)throw new Error("A listener is already attached to this dialog element: ".concat(c,"."));if(l.closeButtonState.listenerAttached)throw new Error("A listener is already attached to the close button of the dialog element: ".concat(c,"."))}(),a.showModal(),o(a),e(l.closeButtonState.listenerAttached,i,d),t(l.escapeKeyListenerAttached,i),n(l)},closeDialog:d}}(document.querySelector("dialog"));document.querySelector("#open-modal-button").addEventListener("click",(function(){m.openDialog()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0JmLEVBQWFtRixHQUN0RnJGLEVBQXdCaUYsRUFBWS9ELDBCQUEyQmhCLEdBRS9EYSxFQUFpQmtFLEVBQ2xCLEVBSUNJLFlBQUFBLEVBRUYsQ0czSnlCSSxDQURWN0MsU0FBU0MsY0FBYyxXQUdkRCxTQUFTQyxjQUFjLHNCQUUvQmpDLGlCQUFpQixTQUFTLFdBQ3hDd0QsRUFBaUJrQixZQUNuQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGlzcGxheS1zdHVmZi11aS8uL3NyYy9kaXNwbGF5LXN0dWZmLXVpLmpzIiwid2VicGFjazovL2Rpc3BsYXktc3R1ZmYtdWkvLi9zcmMvZmx1ZmYuanMiLCJ3ZWJwYWNrOi8vZGlzcGxheS1zdHVmZi11aS8uL3NyYy9zcGxpdC10ZXh0LmpzIiwid2VicGFjazovL2Rpc3BsYXktc3R1ZmYtdWkvLi9zcmMvYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIPCfkq0gQm90aCBTdHVmZlxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiBkc0dldFNlbGVjdG9yKGVsZW1lbnQpIHtcblx0cmV0dXJuIGVsZW1lbnQuaWQgPyBgIyR7ZWxlbWVudC5pZH1gIDogZWxlbWVudC5jbGFzc05hbWUgPyBgLiR7ZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCcuJyl9YCA6ICdzcGVjaWZpZWQgZWxlbWVudCc7XG59XG5cbi8vIPCfkq0gY2xvc2VCdXR0b25TdHVmZlxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiBpbml0aWFsaXplQ2xvc2VCdXR0b24oY2xvc2VCdXR0b24pIHtcblx0Y2xvc2VCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0Nsb3NlIERpYWxvZycpO1xufVxuXG5mdW5jdGlvbiBleGFtaW5lQ2xvc2VCdXR0b24oY2xvc2VCdXR0b24sIHNlbGVjdG9yKSB7XG5cdGlmICghY2xvc2VCdXR0b24pIHRocm93IG5ldyBFcnJvcihgQ2xvc2UgYnV0dG9uIG5vdCBmb3VuZCBmb3IgdGhlIG1vZGFsIGVsZW1lbnQ6ICR7c2VsZWN0b3J94oCmIERvdWJsZSBjaGVjayB0byBlbnN1cmUgaXQgaGFzIGEgY2xhc3Mgb2YgJy5kcy1jbG9zZS1idXR0b24nLmApO1xuXHRpZiAoY2xvc2VCdXR0b24udGFnTmFtZSAhPT0gJ0JVVFRPTicpIHRocm93IG5ldyBFcnJvcihgVGhlIGNsb3NlIGJ1dHRvbiBmb3IgdGhlIG1vZGFsIGVsZW1lbnQ6ICR7c2VsZWN0b3J9IGlzIG5vdCBhIGJ1dHRvbiBlbGVtZW50LmApO1xufVxuXG4vLyDwn5KtIG1vZGFsU3R1ZmZcbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZnVuY3Rpb24gdG9nZ2xlRXNjYXBlS2V5TGlzdGVuZXIoaXNMaXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbikge1xuXHRjb25zdCBtb2RpZmllZEVzY2FwZUtleUNhbGxiYWNrID0gKGV2ZW50KSA9PiB7XG5cdFx0aWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScgJiYgbW9kYWxTdGF0ZS5vcGVuKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Y2xvc2VCdXR0b24uY2xpY2soKTtcblx0XHR9XG5cdH07XG5cblx0KGlzTGlzdGVuZXJBdHRhY2hlZCkgXG5cdFx0P1x0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBtb2RpZmllZEVzY2FwZUtleUNhbGxiYWNrKVxuXHRcdDogd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBtb2RpZmllZEVzY2FwZUtleUNhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlQ2xvc2VCdXR0b25MaXN0ZW5lcihpc0xpc3RlbmVyQXR0YWNoZWQsIGNsb3NlQnV0dG9uLCBjbG9zZU1vZGFsQ2FsbGJhY2spIHtcblx0KGlzTGlzdGVuZXJBdHRhY2hlZCkgXG5cdFx0PyBjbG9zZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWxDYWxsYmFjaylcblx0XHQ6IGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbENhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlTW9kYWxTdGF0ZShtb2RhbFN0YXRlKSB7XG5cdGlmICghbW9kYWxTdGF0ZSkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1vZGFsIHN0YXRlIG9iamVjdCBwYXNzZWQgdG8gdG9nZ2xlTW9kYWxTdGF0ZSBmdW5jdGlvbi5gKTtcblxuXHRtb2RhbFN0YXRlLm9wZW4gPSAhbW9kYWxTdGF0ZS5vcGVuO1xuXHRtb2RhbFN0YXRlLmxpc3RlbmVyQXR0YWNoZWQgPSAhbW9kYWxTdGF0ZS5saXN0ZW5lckF0dGFjaGVkO1xuXHRtb2RhbFN0YXRlLmVzY2FwZUtleUxpc3RlbmVyQXR0YWNoZWQgPSAhbW9kYWxTdGF0ZS5lc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkO1xuXHRtb2RhbFN0YXRlLmNsb3NlQnV0dG9uU3RhdGUubGlzdGVuZXJBdHRhY2hlZCA9ICFtb2RhbFN0YXRlLmNsb3NlQnV0dG9uU3RhdGUubGlzdGVuZXJBdHRhY2hlZDtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlTW9kYWxBdHRyaWJ1dGVzKG1vZGFsRWxlbWVudCkge1xuXHRjb25zdCBtb2RhbE9wZW4gPSBtb2RhbEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpID09PSAndHJ1ZSc7XG5cblx0aWYgKG1vZGFsT3Blbikge1xuXHRcdG1vZGFsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG5cdFx0bW9kYWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICd0cnVlJyk7XG5cdH0gZWxzZSB7XG5cdFx0bW9kYWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuXHRcdG1vZGFsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnLCAnZmFsc2UnKTtcblx0fVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplQXNNb2RhbChtb2RhbEVsZW1lbnQpIHtcblx0bW9kYWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICdmYWxzZScpO1xuXHRtb2RhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG59XG5cbi8vID4+PiBleHBvcnRzXG4vLyA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuLy8g8J+SrSBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXJcbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY29udHJvbGxlciBvYmplY3QgZm9yIG1hbmFnaW5nIGEgZGlhbG9nIGVsZW1lbnQsIHByb3ZpZGluZyBtZXRob2RzIHRvIG9wZW4gYW5kIGNsb3NlIHRoZSBkaWFsb2cuXG4gKiBUaGlzIGZ1bmN0aW9uIGluaXRpYWxpemVzIHRoZSBkaWFsb2cgYXMgYSBtb2RhbCwgc2V0cyB1cCBuZWNlc3NhcnkgYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzLFxuICogYW5kIGVuc3VyZXMgdGhhdCB0aGUgZGlhbG9nIGNhbiBiZSBwcm9wZXJseSBtYW5hZ2VkIHRocm91Z2ggaXRzIGxpZmVjeWNsZS5cbiAqXG4gKiBJdHMgaW50ZW5kZWQgdXNlIGlzIHRvIHByb3ZpZGUgYSBzaW1wbGUgd2F5IHRvIG1hbmFnZSB0aGUgdmlzaWJpbGl0eSBvZiBhIGRpYWxvZyBlbGVtZW50LlxuICogSXQgYWJzdHJhY3RzIG91dCB0aGUgcGVza3kgYW5pbWF0aW5nIGluLWFuZC1vdXQgY29udW5kcnVtIG9mIG1vZGFsIGVsZW1lbnRzIHdpdGggYSBDU1MgcHJvcGVydHksIGRpc3BsYXkgb2Ygbm9uZSAodG8gYmxvY2svZmxleC9ncmlkL2V0Yy4pLlxuICogU2VlIHJlYWRtZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqIFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZGlhbG9nRWxlbWVudCAtIFRoZSBIVE1MIGRpYWxvZyBlbGVtZW50IHRvIGluaXRpYWxpemUgYXMgYSBtb2RhbC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IEFuIG9iamVjdCBjb250YWluaW5nIG1ldGhvZHMgdG8gbWFuYWdlIHRoZSBkaWFsb2cncyB2aXNpYmlsaXR5IGFuZCBzdGF0ZS5cbiAqIFxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBpbnZhbGlkLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBub3QgYSB2YWxpZCBIVE1MIGVsZW1lbnQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIG5vdCBhIHZhbGlkIEhUTUwgPGRpYWxvZz4gZWxlbWVudC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgZGlhbG9nIGlzIGFscmVhZHkgdmlzaWJsZS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBhIGxpc3RlbmVyIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gZGlhbG9nLlxuICogQHRocm93cyB7RXJyb3J9IElmIGEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byBkaWFsb2cncyBjbG9zZSBidXR0b24uXG4gKiBcbiAqIEBleGFtcGxlXG4gKiA/IEFzc3VtZSAnbXlEaWFsb2cnIGlzIGEgRE9NIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBkaWFsb2cuXG4gKiBjb25zdCBkaWFsb2dDb250cm9sbGVyID0gZHNDcmVhdGVEaWFsb2dDb250cm9sbGVyKG15RGlhbG9nKTtcbiAqIFxuICogPyBUbyBvcGVuIHRoZSBkaWFsb2dcbiAqIGRpYWxvZ0NvbnRyb2xsZXIub3BlbkRpYWxvZygpO1xuICogXG4gKiA/IFRvIGNsb3NlIHRoZSBkaWFsb2dcbiAqIGRpYWxvZ0NvbnRyb2xsZXIuY2xvc2VEaWFsb2coKTtcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZHNDcmVhdGVEaWFsb2dDb250cm9sbGVyKGRpYWxvZ0VsZW1lbnQpIHtcblxuXHRmdW5jdGlvbiBleGFtaW5lQXJndW1lbnRPbkNhbGwoZGlhbG9nRWxlbWVudCkge1xuXHRcdGlmICghZGlhbG9nRWxlbWVudCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFyZ3VtZW50IHBhc3NlZCB0byBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIgZnVuY3Rpb24uYCk7XG5cdFx0aWYgKCEoZGlhbG9nRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgdGhyb3cgbmV3IEVycm9yKGBUaGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgbm90IGEgdmFsaWQgSFRNTCBlbGVtZW50LmApO1xuXHRcdGlmIChkaWFsb2dFbGVtZW50LnRhZ05hbWUgIT09ICdESUFMT0cnKSB0aHJvdyBuZXcgRXJyb3IoYFRoZSBlbGVtZW50IHlvdSBwYXNzZWQgaW4gaXMgbm90IGEgZGlhbG9nIGVsZW1lbnQuYCk7XG5cdH1cblxuXHQvLyDwn5S0IGNoZWNrUG9pbnRcblx0ZXhhbWluZUFyZ3VtZW50T25DYWxsKGRpYWxvZ0VsZW1lbnQpOyBcblx0Ly8g8J+foiBjbGVhcmVkU3VjY2Vzc2Z1bGx5ICFcblxuXHRpbml0aWFsaXplQXNNb2RhbChkaWFsb2dFbGVtZW50KTsgXG5cblx0Y29uc3QgZGlhbG9nU2VsZWN0b3IgPSBkc0dldFNlbGVjdG9yKGRpYWxvZ0VsZW1lbnQpO1xuXHRjb25zdCBjbG9zZUJ1dHRvbiA9IGRpYWxvZ0VsZW1lbnQucXVlcnlTZWxlY3RvcignLmRzLWNsb3NlLWJ1dHRvbicpO1xuXG5cdGV4YW1pbmVDbG9zZUJ1dHRvbihjbG9zZUJ1dHRvbiwgZGlhbG9nU2VsZWN0b3IpO1xuXHRpbml0aWFsaXplQ2xvc2VCdXR0b24oY2xvc2VCdXR0b24pO1xuXG5cdGxldCBkaWFsb2dTdGF0ZSA9IHtcblx0XHRvcGVuOiBmYWxzZSxcblx0XHRsaXN0ZW5lckF0dGFjaGVkOiBmYWxzZSxcblx0XHRlc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkOiBmYWxzZSxcblx0XHRjbG9zZUJ1dHRvblN0YXRlOiB7XG5cdFx0XHRsaXN0ZW5lckF0dGFjaGVkOiBmYWxzZSxcblx0XHR9XG5cdH07XG5cblx0Y29uc3Qgc2FuaXRpemVEaWFsb2cgPSAoKSA9PiB7XG5cdFx0ZGlhbG9nRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjbG9zaW5nJyk7XG5cdFx0ZGlhbG9nRWxlbWVudC5jbG9zZSgpO1xuXHRcdFxuXHRcdHRvZ2dsZU1vZGFsQXR0cmlidXRlcyhkaWFsb2dFbGVtZW50KTtcblx0XHR0b2dnbGVDbG9zZUJ1dHRvbkxpc3RlbmVyKGRpYWxvZ1N0YXRlLmNsb3NlQnV0dG9uU3RhdGUubGlzdGVuZXJBdHRhY2hlZCwgY2xvc2VCdXR0b24sIGNsb3NlRGlhbG9nKTtcblx0XHR0b2dnbGVFc2NhcGVLZXlMaXN0ZW5lcihkaWFsb2dTdGF0ZS5lc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbik7XG5cblx0XHRkaWFsb2dFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIHNhbml0aXplRGlhbG9nKTtcblxuXHRcdHRvZ2dsZU1vZGFsU3RhdGUoZGlhbG9nU3RhdGUpO1xuXHR9XG5cblx0Y29uc3QgY2xvc2VEaWFsb2cgPSAoKSA9PiB7XG5cdFx0ZGlhbG9nRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjbG9zaW5nJyk7XG5cdFx0ZGlhbG9nRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBzYW5pdGl6ZURpYWxvZyk7XG5cdH1cblxuXHRjb25zdCBpbnNwZWN0RGlhbG9nID0gKCkgPT4ge1xuXHRcdGlmIChkaWFsb2dFbGVtZW50Lm9wZW4pIHRocm93IG5ldyBFcnJvcihgVGhlIGZvbGxvd2luZyBkaWFsb2cgaXMgYWxyZWFkeSBvcGVuOiAke2RpYWxvZ1NlbGVjdG9yfS5gKTtcblx0XHRpZiAoZGlhbG9nU3RhdGUubGlzdGVuZXJBdHRhY2hlZCkgdGhyb3cgbmV3IEVycm9yKGBBIGxpc3RlbmVyIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhpcyBkaWFsb2cgZWxlbWVudDogJHtkaWFsb2dTZWxlY3Rvcn0uYCk7XG5cdFx0aWYgKGRpYWxvZ1N0YXRlLmNsb3NlQnV0dG9uU3RhdGUubGlzdGVuZXJBdHRhY2hlZCkgdGhyb3cgbmV3IEVycm9yKGBBIGxpc3RlbmVyIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhlIGNsb3NlIGJ1dHRvbiBvZiB0aGUgZGlhbG9nIGVsZW1lbnQ6ICR7ZGlhbG9nU2VsZWN0b3J9LmApO1xuXHR9XG5cblx0Y29uc3Qgb3BlbkRpYWxvZyA9ICgpID0+IHtcblx0XHQvLyDwn5S0IGNoZWNrUG9pbnRcblx0XHRpbnNwZWN0RGlhbG9nKCk7IFxuXHRcdC8vIPCfn6IgY2xlYXJlZFN1Y2Nlc3NmdWxseSAhXG5cblx0XHRkaWFsb2dFbGVtZW50LnNob3dNb2RhbCgpO1xuXHRcdFxuXHRcdHRvZ2dsZU1vZGFsQXR0cmlidXRlcyhkaWFsb2dFbGVtZW50KTtcblx0XHR0b2dnbGVDbG9zZUJ1dHRvbkxpc3RlbmVyKGRpYWxvZ1N0YXRlLmNsb3NlQnV0dG9uU3RhdGUubGlzdGVuZXJBdHRhY2hlZCwgY2xvc2VCdXR0b24sIGNsb3NlRGlhbG9nKTtcblx0XHR0b2dnbGVFc2NhcGVLZXlMaXN0ZW5lcihkaWFsb2dTdGF0ZS5lc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbik7XG5cdFx0XG5cdFx0dG9nZ2xlTW9kYWxTdGF0ZShkaWFsb2dTdGF0ZSk7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdG9wZW5EaWFsb2csXG5cdFx0Y2xvc2VEaWFsb2dcblx0fVxufVxuXG4vLyDwn5KtIGRzQ3JlYXRlTGlnaHRib3hDb250cm9sbGVyXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQ3JlYXRlcyBhIGNvbnRyb2xsZXIgb2JqZWN0IGZvciBtYW5hZ2luZyBhbnkgZWxlbWVudCB3aXRoIG1vZGFsLWxpa2UgZnVuY3Rpb25hbGl0eSwgcHJvdmlkaW5nIG1ldGhvZHMgdG8gJ29wZW4nIGFuZCAnY2xvc2UnIHRoZSBsaWdodGJveC5cbiAqIFRoaXMgZnVuY3Rpb24gaW5pdGlhbGl6ZXMgdGhlIGxpZ2h0Ym94IGFzIGEgbW9kYWwsIHNldHMgdXAgbmVjZXNzYXJ5IGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlcyxcbiAqIGFuZCBlbnN1cmVzIHRoYXQgdGhlIGxpZ2h0Ym94IGNhbiBiZSBwcm9wZXJseSBtYW5hZ2VkIHRocm91Z2ggaXRzIGxpZmVjeWNsZS5cbiAqIFxuICogSXRzIGludGVuZGVkIHVzZSBpcyB0byBwcm92aWRlIGEgc2ltcGxlIHdheSB0byBtYW5hZ2UgdGhlIHZpc2liaWxpdHkgb2YgYSBsaWdodGJveCBlbGVtZW50LlxuICogSXQgYWJzdHJhY3RzIG91dCB0aGUgcGVza3kgYW5pbWF0aW5nIGluLWFuZC1vdXQgY29udW5kcnVtIG9mIG1vZGFsLWxpa2UgZWxlbWVudHMgd2l0aCBhIENTUyBwcm9wZXJ0eSwgZGlzcGxheSBvZiBub25lICh0byBibG9jay9mbGV4L2dyaWQvZXRjLikuXG4gKiBTZWUgcmVhZG1lIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGxpZ2h0Ym94RWxlbWVudCAtIEFueSBIVE1MIGNvbnRhaW5lciBlbGVtZW50IChpZS4sIDxkaXY+KSB0byBpbml0aWFsaXplIGFzIGEgbW9kYWwuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3QgY29udGFpbmluZyBtZXRob2RzIHRvIG1hbmFnZSB0aGUgbGlnaHRib3hlcydzIHZpc2liaWxpdHkgYW5kIHN0YXRlLlxuICogXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIGludmFsaWQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIG5vdCBhIHZhbGlkIEhUTUwgZWxlbWVudC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgbGlnaHRib3ggaXMgYWxyZWFkeSB2aXNpYmxlLlxuICogQHRocm93cyB7RXJyb3J9IElmIGEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byBsaWdodGJveC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBhIGxpc3RlbmVyIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gbGlnaHRib3gncyBjbG9zZSBidXR0b24uXG4gKiBcbiAqIEBleGFtcGxlXG4gKiA/IEFzc3VtZSAnbXlMaWdodGJveCcgaXMgYSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGRpYWxvZy5cbiAqIGNvbnN0IGxpZ2h0Qm94Q29udHJvbGxlciA9IGRzQ3JlYXRlTGlnaHRib3hDb250cm9sbGVyKG15TGlnaHRib3gpO1xuICogXG4gKiA/IFRvIG9wZW4gdGhlIGxpZ2h0Ym94XG4gKiBsaWdodEJveENvbnRyb2xsZXIub3BlbkxpZ2h0Ym94KCk7XG4gKiBcbiAqID8gVG8gY2xvc2UgdGhlIGxpZ2h0Ym94XG4gKiBsaWdodEJveENvbnRyb2xsZXIuY2xvc2VMaWdodGJveCgpO1xuICogXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRzQ3JlYXRlTGlnaHRib3hDb250cm9sbGVyKGxpZ2h0Ym94RWxlbWVudCkge1xuXG5cdGZ1bmN0aW9uIGV4YW1pbmVBcmd1bWVudE9uQ2FsbCgpIHtcblx0XHRpZiAoIWxpZ2h0Ym94RWxlbWVudCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFyZ3VtZW50IHBhc3NlZCB0byBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIgZnVuY3Rpb24uYCk7XG5cdFx0aWYgKCEobGlnaHRib3hFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBub3QgYSB2YWxpZCBIVE1MIGVsZW1lbnQuYCk7XG5cdH1cblxuXHQvLyDwn5S0IGNoZWNrUG9pbnRcblx0ZXhhbWluZUFyZ3VtZW50T25DYWxsKCk7IC8vICEgY2hlY2tQb2ludFxuXHQvLyDwn5+iIGNsZWFyZWRTdWNjZXNzZnVsbHkgIVxuXG5cdGluaXRpYWxpemVBc01vZGFsKGxpZ2h0Ym94RWxlbWVudCk7XG5cblx0Y29uc3QgbGlnaHRCb3hTZWxlY3RvciA9IGRzR2V0U2VsZWN0b3IobGlnaHRib3hFbGVtZW50KTtcblx0Y29uc3QgY2xvc2VCdXR0b24gPSBsaWdodGJveEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRzLWNsb3NlLWJ1dHRvbicpO1xuXG5cdGV4YW1pbmVDbG9zZUJ1dHRvbihjbG9zZUJ1dHRvbiwgbGlnaHRCb3hTZWxlY3Rvcik7XG5cdGluaXRpYWxpemVDbG9zZUJ1dHRvbihjbG9zZUJ1dHRvbik7XG5cblx0bGV0IGxpZ2h0Ym94U3RhdGUgPSB7XG5cdFx0bW9kYWxPcGVuOiBmYWxzZSxcblx0XHRsaXN0ZW5lckF0dGFjaGVkOiBmYWxzZSxcblx0XHRlc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkOiBmYWxzZSxcblx0XHRjbG9zZUJ1dHRvblN0YXRlOiB7XG5cdFx0XHRsaXN0ZW5lckF0dGFjaGVkOiBmYWxzZSxcblx0XHR9XG5cdH07XG5cblx0Y29uc3QgY2xlYW5MaWdodEJveCA9ICgpID0+IHtcblx0XHRsaWdodGJveEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2xvc2luZycpO1xuXHRcdGxpZ2h0Ym94RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG5cblx0XHR0b2dnbGVNb2RhbEF0dHJpYnV0ZXMobGlnaHRib3hFbGVtZW50KTtcblx0XHR0b2dnbGVDbG9zZUJ1dHRvbkxpc3RlbmVyKGxpZ2h0Ym94U3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbiwgY2xvc2VMaWdodGJveCk7XG5cdFx0dG9nZ2xlRXNjYXBlS2V5TGlzdGVuZXIobGlnaHRib3hTdGF0ZS5lc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbik7XG5cblx0XHRsaWdodGJveEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgY2xlYW5MaWdodEJveCk7XG5cblx0XHR0b2dnbGVNb2RhbFN0YXRlKGxpZ2h0Ym94U3RhdGUpO1xuXHR9XG5cblx0Y29uc3QgY2xvc2VMaWdodGJveCA9ICgpID0+IHtcblx0XHRsaWdodGJveEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2xvc2luZycpO1xuXHRcdGxpZ2h0Ym94RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBjbGVhbkxpZ2h0Qm94KTtcblx0fVxuXG5cdGNvbnN0IGluc3BlY3RMaWdodGJveCA9ICgpID0+IHtcblx0XHRpZiAobGlnaHRib3hFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpKSB0aHJvdyBuZXcgRXJyb3IoYFRoZSBmb2xsb3dpbmcgbGlnaHRib3ggaXMgYWxyZWFkeSB2aXNpYmxlOiAke2xpZ2h0Qm94U2VsZWN0b3J9LmApO1xuXHRcdGlmIChsaWdodGJveFN0YXRlLmxpc3RlbmVyQXR0YWNoZWQpIHRocm93IG5ldyBFcnJvcihgQSBsaXN0ZW5lciBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIHRoZSBsaWdodGJveCBlbGVtZW50OiAke2xpZ2h0Qm94U2VsZWN0b3J9LmApO1xuXHRcdGlmIChsaWdodGJveFN0YXRlLmNsb3NlQnV0dG9uU3RhdGUubGlzdGVuZXJBdHRhY2hlZCkgdGhyb3cgbmV3IEVycm9yKGBBIGxpc3RlbmVyIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhlIGNsb3NlIGJ1dHRvbiBvZiB0aGUgbGlnaHRib3g6ICR7bGlnaHRCb3hTZWxlY3Rvcn0uYCk7XG5cdH1cblxuXHRjb25zdCBvcGVuTGlnaHRib3ggPSAoKSA9PiB7XG5cdFx0Ly8g8J+UtCBjaGVja1BvaW50XG5cdFx0aW5zcGVjdExpZ2h0Ym94KCk7XG5cdFx0Ly8g8J+foiBjbGVhcmVkU3VjY2Vzc2Z1bGx5ICFcblx0XHRcblx0XHRsaWdodGJveEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuXG5cdFx0dG9nZ2xlTW9kYWxBdHRyaWJ1dGVzKGxpZ2h0Ym94RWxlbWVudCk7XG5cdFx0dG9nZ2xlQ2xvc2VCdXR0b25MaXN0ZW5lcihsaWdodGJveFN0YXRlLmNsb3NlQnV0dG9uU3RhdGUubGlzdGVuZXJBdHRhY2hlZCwgY2xvc2VCdXR0b24sIGNsb3NlTGlnaHRib3gpO1xuXHRcdHRvZ2dsZUVzY2FwZUtleUxpc3RlbmVyKGxpZ2h0Ym94U3RhdGUuZXNjYXBlS2V5TGlzdGVuZXJBdHRhY2hlZCwgY2xvc2VCdXR0b24pO1xuXG5cdFx0dG9nZ2xlTW9kYWxTdGF0ZShsaWdodGJveFN0YXRlKTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0b3BlbkxpZ2h0Ym94LFxuXHRcdGNsb3NlTGlnaHRib3hcblx0fVxufVxuXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vID8gRnVuIGZhY3Q6IFxuLy8gPyBMaWdodGJveGVzIGFyZSBuYW1lZCBhZnRlciB0aGUgbGlnaHRib3ggdGhhdCBwaG90b2dyYXBoZXJzIHVzZSB0byB2aWV3IHNsaWRlcy4gXG4vLyA/IE9r4oCmIG1heWJlIGl0J3Mgbm90IHRoYXQgZnVuLiIsImltcG9ydCB7IGNyZWF0ZVNwbGl0VGV4dEZyYWdtZW50IH0gZnJvbSBcIi4vc3BsaXQtdGV4dFwiO1xuXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIHJhbmRvbWl6ZUNoYXJhY3RlckxvY2F0aW9ucyhub25XaGl0ZXNwYWNlQ2hhcmFjdGVycykge1xuICBub25XaGl0ZXNwYWNlQ2hhcmFjdGVycy5mb3JFYWNoKGNoYXJhY3RlciA9PiB7XG4gICAgY29uc3QgcmFuZG9tTnVtYmVyID0gTWF0aC5yYW5kb20oKTtcblxuICAgIGlmIChyYW5kb21OdW1iZXIgPj0gMCAmJiByYW5kb21OdW1iZXIgPCAwLjI1KSB7XG4gICAgICBjaGFyYWN0ZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMzMyl9cHgsICR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzMzKX1weClgO1xuICAgIH0gZWxzZSBpZiAocmFuZG9tTnVtYmVyID49IDAuMjUgJiYgcmFuZG9tTnVtYmVyIDwgMC41KSB7XG4gICAgICBjaGFyYWN0ZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIC0zMzMpfXB4LCAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIC0zMzMpfXB4KWA7XG4gICAgfSBlbHNlIGlmIChyYW5kb21OdW1iZXIgPj0gMC41ICYmIHJhbmRvbU51bWJlciA8IDAuNzUpIHtcbiAgICAgIGNoYXJhY3Rlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzMzKX1weCwgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAtMzMzKX1weClgO1xuICAgIH0gZWxzZSB7IC8vID8gcmFuZG9tTnVtYmVyIDw9IDAuMjVcbiAgICAgIGNoYXJhY3Rlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogLTMzMyl9cHgsICR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzMzKX1weClgO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRNb2RhbExpc3RlbmVycygpIHtcbiAgY29uc3QgYWRkTGlzdGVuZXJGb3JNb2RhbE9wZW4gPSAobm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMpID0+IHtcbiAgICBjb25zdCBvcGVuTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3Blbi1tb2RhbC1idXR0b24nKTtcblxuICAgIG9wZW5Nb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzLmZvckVhY2gobm9uV2hpdGVzcGFjZUNoYXJhY3RlciA9PiBub25XaGl0ZXNwYWNlQ2hhcmFjdGVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoMCwgMCknKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBhZGRMaXN0ZW5lckZvck1vZGFsQ2xvc2UgPSAobm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMpID0+IHtcbiAgICBjb25zdCBjbG9zZU1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRzLWNsb3NlLWJ1dHRvbicpO1xuXG4gICAgY2xvc2VNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHJhbmRvbWl6ZUNoYXJhY3RlckxvY2F0aW9ucyhub25XaGl0ZXNwYWNlQ2hhcmFjdGVycyk7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBub25XaGl0ZXNwYWNlQ2hhcmFjdGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGFyYWN0ZXIubm9uLXdoaXRlc3BhY2UnKTtcbiAgYWRkTGlzdGVuZXJGb3JNb2RhbE9wZW4obm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMpO1xuICBhZGRMaXN0ZW5lckZvck1vZGFsQ2xvc2Uobm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZU1vZGFsQ29udGVudCgpIHtcbiAgY29uc3QgZ2V0U3BsaXRFbGVtZW50RnJhZ21lbnQgPSAoZWxlbWVudFRvU3BsaXQsIGVsZW1lbnRUb0FwcGVuZEZyYWdtZW50LCBpZGVudGlmaWVyRm9yRWFjaFNwbGl0RWxlbWVudCkgPT4ge1xuICAgIGVsZW1lbnRUb0FwcGVuZEZyYWdtZW50LmFwcGVuZENoaWxkKGNyZWF0ZVNwbGl0VGV4dEZyYWdtZW50KGVsZW1lbnRUb1NwbGl0LCBpZGVudGlmaWVyRm9yRWFjaFNwbGl0RWxlbWVudCkpO1xuXG4gICAgcmV0dXJuIGVsZW1lbnRUb0FwcGVuZEZyYWdtZW50O1xuICB9O1xuXG4gIGNvbnN0IGlkZW50aWZ5Tm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMgPSAoc3BsaXRUZXh0KSA9PiB7XG4gICAgY29uc3Qgbm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsaXRUZXh0LmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IHNwbGl0VGV4dC5jaGlsZHJlbltpXTtcbiAgICAgIGlmIChjaGlsZC50ZXh0Q29udGVudC50cmltKCkgIT09ICcnKSBub25XaGl0ZXNwYWNlQ2hhcmFjdGVycy5wdXNoKGNoaWxkKTtcbiAgICB9XG5cbiAgICBub25XaGl0ZXNwYWNlQ2hhcmFjdGVycy5mb3JFYWNoKGNoYXJhY3RlciA9PiBjaGFyYWN0ZXIuY2xhc3NMaXN0LmFkZCgnbm9uLXdoaXRlc3BhY2UnKSk7XG5cbiAgICByZXR1cm4gbm9uV2hpdGVzcGFjZUNoYXJhY3RlcnM7XG4gIH07XG5cbiAgY29uc3QgcmVwbGFjZUVsZW1lbnQgPSAoY29udGFpbmVyLCBuZXdFbGVtZW50LCBvbGRFbGVtZW50KSA9PiB7XG4gICAgY29udGFpbmVyLnJlcGxhY2VDaGlsZChuZXdFbGVtZW50LCBvbGRFbGVtZW50KTtcbiAgfVxuXG4gIGNvbnN0IHByZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjLWNvbnRhaW5lcicpO1xuICBjb25zdCBwcmUgPSBwcmVDb250YWluZXIucXVlcnlTZWxlY3RvcigncHJlJyk7XG5cbiAgY29uc3QgbmV3UHJlID0gZ2V0U3BsaXRFbGVtZW50RnJhZ21lbnQocHJlLCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwcmUnKSwgJ2NoYXJhY3RlcicpO1xuICByZXBsYWNlRWxlbWVudChwcmVDb250YWluZXIsIG5ld1ByZSwgcHJlKTtcblxuICByYW5kb21pemVDaGFyYWN0ZXJMb2NhdGlvbnMoaWRlbnRpZnlOb25XaGl0ZXNwYWNlQ2hhcmFjdGVycyhuZXdQcmUpKTtcbn0iLCJleHBvcnQgZnVuY3Rpb24gY3JlYXRlU3BsaXRUZXh0RnJhZ21lbnQoZWxlbWVudCwgaWQpIHtcbiAgY29uc3QgZ2V0Tm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMgPSAoZWxlbWVudCkgPT4ge1xuXG4gICAgXG4gIH07XG5cbiAgY29uc3Qgc3BsaXRUZXh0RnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIGNvbnN0IHRleHQgPSBlbGVtZW50LnRleHRDb250ZW50O1xuXG4gIHRleHQuc3BsaXQoJycpLmZvckVhY2goKGNoYXJhY3RlciwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBjaGFyYWN0ZXJTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGNoYXJhY3RlclNwYW4uc2V0QXR0cmlidXRlKCdpZCcsIGAke2lkfS0ke2luZGV4ICsgMX1gKTtcbiAgICBjaGFyYWN0ZXJTcGFuLmNsYXNzTGlzdC5hZGQoJ2NoYXJhY3RlcicpO1xuXG4gICAgLy8gVXNlIGEgbm9uLWJyZWFraW5nIHNwYWNlIGZvciBzcGFjZXMgdG8gZW5zdXJlIHRoZXkgYXJlIHByZXNlcnZlZFxuICAgIGNoYXJhY3RlclNwYW4udGV4dENvbnRlbnQgPSBjaGFyYWN0ZXIgPT09ICcgJyA/ICdcXHUwMEEwJyA6IGNoYXJhY3RlcjtcblxuICAgIHNwbGl0VGV4dEZyYWdtZW50LmFwcGVuZENoaWxkKGNoYXJhY3RlclNwYW4pO1xuICB9KTtcblxuICByZXR1cm4gc3BsaXRUZXh0RnJhZ21lbnQ7XG59IiwiaW1wb3J0IHsgZHNDcmVhdGVEaWFsb2dDb250cm9sbGVyIH0gZnJvbSBcIi4vZGlzcGxheS1zdHVmZi11aVwiO1xuXG5pbXBvcnQgeyBpbml0aWFsaXplTW9kYWxDb250ZW50LCBhZGRNb2RhbExpc3RlbmVycyB9IGZyb20gJy4vZmx1ZmYnOyBcbmltcG9ydCAnLi9zYXNzL21haW4uc2Nzcyc7XG5cbmZ1bmN0aW9uIGluaXRBcHAoKSB7XG4gIGluaXRpYWxpemVNb2RhbENvbnRlbnQoKTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBhZGRNb2RhbExpc3RlbmVycyk7XG59O1xuXG5pbml0QXBwKCk7XG5cbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gPyBkaXNwbGF5U3R1ZmYuanNcbi8vID8gPGRpYWxvZz4gZGVtbzpcblxuY29uc3QgZGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGlhbG9nJyk7XG5jb25zdCBkaWFsb2dDb250cm9sbGVyID0gZHNDcmVhdGVEaWFsb2dDb250cm9sbGVyKGRpYWxvZyk7XG5cbmNvbnN0IG9wZW5Nb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcGVuLW1vZGFsLWJ1dHRvbicpO1xuXG5vcGVuTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGRpYWxvZ0NvbnRyb2xsZXIub3BlbkRpYWxvZygpO1xufSk7Il0sIm5hbWVzIjpbInRvZ2dsZUVzY2FwZUtleUxpc3RlbmVyIiwiaXNMaXN0ZW5lckF0dGFjaGVkIiwiY2xvc2VCdXR0b24iLCJtb2RpZmllZEVzY2FwZUtleUNhbGxiYWNrIiwiZXZlbnQiLCJrZXkiLCJtb2RhbFN0YXRlIiwib3BlbiIsInByZXZlbnREZWZhdWx0IiwiY2xpY2siLCJ3aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZUNsb3NlQnV0dG9uTGlzdGVuZXIiLCJjbG9zZU1vZGFsQ2FsbGJhY2siLCJ0b2dnbGVNb2RhbFN0YXRlIiwiRXJyb3IiLCJsaXN0ZW5lckF0dGFjaGVkIiwiZXNjYXBlS2V5TGlzdGVuZXJBdHRhY2hlZCIsImNsb3NlQnV0dG9uU3RhdGUiLCJ0b2dnbGVNb2RhbEF0dHJpYnV0ZXMiLCJtb2RhbEVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJyYW5kb21pemVDaGFyYWN0ZXJMb2NhdGlvbnMiLCJub25XaGl0ZXNwYWNlQ2hhcmFjdGVycyIsImZvckVhY2giLCJjaGFyYWN0ZXIiLCJyYW5kb21OdW1iZXIiLCJNYXRoIiwicmFuZG9tIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJjb25jYXQiLCJmbG9vciIsImVsZW1lbnRUb1NwbGl0IiwiZWxlbWVudFRvQXBwZW5kRnJhZ21lbnQiLCJlbGVtZW50Iiwic3BsaXRUZXh0RnJhZ21lbnQiLCJuZXdFbGVtZW50Iiwib2xkRWxlbWVudCIsInByZUNvbnRhaW5lciIsInByZSIsIm5ld1ByZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJ0ZXh0Q29udGVudCIsInNwbGl0IiwiaW5kZXgiLCJjaGFyYWN0ZXJTcGFuIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVwbGFjZUNoaWxkIiwic3BsaXRUZXh0IiwiaSIsImNoaWxkcmVuIiwibGVuZ3RoIiwiY2hpbGQiLCJ0cmltIiwicHVzaCIsImlkZW50aWZ5Tm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibm9uV2hpdGVzcGFjZUNoYXJhY3RlciIsImFkZExpc3RlbmVyRm9yTW9kYWxPcGVuIiwiYWRkTGlzdGVuZXJGb3JNb2RhbENsb3NlIiwiZGlhbG9nQ29udHJvbGxlciIsImRpYWxvZ0VsZW1lbnQiLCJIVE1MRWxlbWVudCIsInRhZ05hbWUiLCJleGFtaW5lQXJndW1lbnRPbkNhbGwiLCJkaWFsb2dTZWxlY3RvciIsImlkIiwiY2xhc3NOYW1lIiwiam9pbiIsImRzR2V0U2VsZWN0b3IiLCJzZWxlY3RvciIsImV4YW1pbmVDbG9zZUJ1dHRvbiIsImluaXRpYWxpemVDbG9zZUJ1dHRvbiIsImRpYWxvZ1N0YXRlIiwic2FuaXRpemVEaWFsb2ciLCJyZW1vdmUiLCJjbG9zZSIsImNsb3NlRGlhbG9nIiwib3BlbkRpYWxvZyIsImluc3BlY3REaWFsb2ciLCJzaG93TW9kYWwiLCJkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIiXSwic291cmNlUm9vdCI6IiJ9