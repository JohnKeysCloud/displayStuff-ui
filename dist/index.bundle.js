(()=>{"use strict";function t(t){if(!t)throw new Error("Invalid modal state object passed to toggleModalState function.");if(!t.closeButtonState)throw new Error("Invalid close button state object passed to toggleModalState function.");t.listenerAttached=!t.listenerAttached,t.closeButtonState.listenerAttached=!t.closeButtonState.listenerAttached}function e(t){"true"===t.getAttribute("aria-hidden")?(t.setAttribute("aria-hidden","false"),t.setAttribute("aria-modal","true")):(t.setAttribute("aria-hidden","true"),t.setAttribute("aria-modal","false"))}function n(t){t.forEach((function(t){var e=Math.random();t.style.transform=e>=0&&e<.25?"translate(".concat(Math.floor(333*Math.random()),"px, ").concat(Math.floor(333*Math.random()),"px)"):e>=.25&&e<.5?"translate(".concat(Math.floor(-333*Math.random()),"px, ").concat(Math.floor(-333*Math.random()),"px)"):e>=.5&&e<.75?"translate(".concat(Math.floor(333*Math.random()),"px, ").concat(Math.floor(-333*Math.random()),"px)"):"translate(".concat(Math.floor(-333*Math.random()),"px, ").concat(Math.floor(333*Math.random()),"px)")}))}function o(){var t=document.querySelectorAll(".character.non-whitespace");!function(t){document.querySelector("#open-modal-button").addEventListener("click",(function(){t.forEach((function(t){return t.style.transform="translate(0, 0)"}))}))}(t),function(t){document.querySelector(".ds-close-button").addEventListener("click",(function(){n(t)}))}(t)}function a(){var t,e,o,a,r,c,i=document.querySelector("#c-container"),l=i.querySelector("pre"),s=(t=l,"character",(e=document.createElement("pre")).appendChild((o=t,"character",a=document.createDocumentFragment(),o.textContent.split("").forEach((function(t,e){var n=document.createElement("span");n.setAttribute("id","".concat("character","-").concat(e+1)),n.classList.add("character"),n.textContent=" "===t?" ":t,a.appendChild(n)})),a)),e);r=s,c=l,i.replaceChild(r,c),n(function(t){for(var e=[],n=0;n<t.children.length;n++){var o=t.children[n];""!==o.textContent.trim()&&e.push(o)}return e.forEach((function(t){return t.classList.add("non-whitespace")})),e}(s))}a(),window.addEventListener("load",o),a(),window.addEventListener("load",o);var r=function(n){var o;!function(t){if(!t)throw new Error("Invalid argument passed to dsCreateDialogController function.");if(!(t instanceof HTMLElement))throw new Error("The provided argument is not a valid HTML element.");if("DIALOG"!==t.tagName)throw new Error("The element you passed in is not a dialog element.")}(n),(o=n).setAttribute("aria-modal","false"),o.setAttribute("aria-hidden","true");var a,r=(a=n).id?"#".concat(a.id):a.className?".".concat(a.className.split(" ").join(".")):"specified element",c=n.querySelector(".ds-close-button");(function(t,e){if(!t)throw new Error("Close button not found for the modal element: ".concat(e,"… Double check to ensure it has a class of '.ds-close-button'."));if("BUTTON"!==t.tagName)throw new Error("The close button for the modal element: ".concat(e," is not a button element."))})(c,r),function(t){t.setAttribute("aria-label","Close Dialog")}(c);var i={listenerAttached:!1,closeButtonState:{listenerAttached:!1}},l=function o(){n.classList.remove("closing"),n.close(),e(n),c.removeEventListener("click",s),n.removeEventListener("animationend",o),t(i)},s=function(){n.classList.add("closing"),n.addEventListener("animationend",l)};return{openDialog:function(){!function(){if(n.open)throw new Error("The following dialog is already open: ".concat(r,"."));if(i.listenerAttached)throw new Error("A listener is already attached to this dialog element: ".concat(r,"."));if(i.closeButtonState.listenerAttached)throw new Error("A listener is already attached to the close button of the dialog element: ".concat(r,"."))}(),n.showModal(),e(n),c.addEventListener("click",s),t(i)},closeDialog:s}}(document.querySelector("dialog"));document.querySelector("#open-modal-button").addEventListener("click",(function(){r.openDialog()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dEIsSUFBSUksRUFBYyxDQUNqQmxFLGtCQUFrQixFQUNsQkQsaUJBQWtCLENBQ2pCQyxrQkFBa0IsSUFJZG1FLEVBQWlCLFNBQWpCQSxJQUNMYixFQUFjYixVQUFVMkIsT0FBTyxXQUMvQmQsRUFBY2UsUUFFZHBFLEVBQXNCcUQsR0FFdEJRLEVBQVlRLG9CQUFvQixRQUFTQyxHQUN6Q2pCLEVBQWNnQixvQkFBb0IsZUFBZ0JILEdBRWxEdkUsRUFBaUJzRSxFQUNsQixFQUVNSyxFQUFjLFdBQ25CakIsRUFBY2IsVUFBVUMsSUFBSSxXQUM1QlksRUFBY2xDLGlCQUFpQixlQUFnQitDLEVBQ2hELEVBcUJBLE1BQU8sQ0FDTkssV0Fka0IsWUFORyxXQUNyQixHQUFJbEIsRUFBY21CLEtBQU0sTUFBTSxJQUFJM0UsTUFBTSx5Q0FBRGdCLE9BQTBDNEMsRUFBYyxNQUMvRixHQUFJUSxFQUFZbEUsaUJBQWtCLE1BQU0sSUFBSUYsTUFBTSwwREFBRGdCLE9BQTJENEMsRUFBYyxNQUMxSCxHQUFJUSxFQUFZbkUsaUJBQWlCQyxpQkFBa0IsTUFBTSxJQUFJRixNQUFNLDZFQUFEZ0IsT0FBOEU0QyxFQUFjLEtBQy9KLENBSUNnQixHQUdBcEIsRUFBY3FCLFlBRWQxRSxFQUFzQnFELEdBQ3RCUSxFQUFZMUMsaUJBQWlCLFFBQVNtRCxHQUV0QzNFLEVBQWlCc0UsRUFDbEIsRUFJQ0ssWUFBQUEsRUFFRixDR3RJeUJLLENBRFYzRCxTQUFTRSxjQUFjLFdBR2RGLFNBQVNFLGNBQWMsc0JBRS9CQyxpQkFBaUIsU0FBUyxXQUN4Q2lDLEVBQWlCbUIsWUFDbkIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rpc3BsYXktc3R1ZmYtdWkvLi9zcmMvZGlzcGxheVN0dWZmLmpzIiwid2VicGFjazovL2Rpc3BsYXktc3R1ZmYtdWkvLi9zcmMvZmx1ZmYuanMiLCJ3ZWJwYWNrOi8vZGlzcGxheS1zdHVmZi11aS8uL3NyYy9zcGxpdC10ZXh0LmpzIiwid2VicGFjazovL2Rpc3BsYXktc3R1ZmYtdWkvLi9zcmMvYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIPCfkq0gQm90aCBTdHVmZlxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiBkc0dldFNlbGVjdG9yKGVsZW1lbnQpIHtcblx0cmV0dXJuIGVsZW1lbnQuaWQgPyBgIyR7ZWxlbWVudC5pZH1gIDogZWxlbWVudC5jbGFzc05hbWUgPyBgLiR7ZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCcuJyl9YCA6ICdzcGVjaWZpZWQgZWxlbWVudCc7XG59XG5cbi8vIPCfkq0gY2xvc2VCdXR0b25TdHVmZlxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiBpbml0aWFsaXplQ2xvc2VCdXR0b24oY2xvc2VCdXR0b24pIHtcblx0Y2xvc2VCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0Nsb3NlIERpYWxvZycpO1xufVxuXG5mdW5jdGlvbiBleGFtaW5lQ2xvc2VCdXR0b24oY2xvc2VCdXR0b24sIHNlbGVjdG9yKSB7XG5cdGlmICghY2xvc2VCdXR0b24pIHRocm93IG5ldyBFcnJvcihgQ2xvc2UgYnV0dG9uIG5vdCBmb3VuZCBmb3IgdGhlIG1vZGFsIGVsZW1lbnQ6ICR7c2VsZWN0b3J94oCmIERvdWJsZSBjaGVjayB0byBlbnN1cmUgaXQgaGFzIGEgY2xhc3Mgb2YgJy5kcy1jbG9zZS1idXR0b24nLmApO1xuXHRpZiAoY2xvc2VCdXR0b24udGFnTmFtZSAhPT0gJ0JVVFRPTicpIHRocm93IG5ldyBFcnJvcihgVGhlIGNsb3NlIGJ1dHRvbiBmb3IgdGhlIG1vZGFsIGVsZW1lbnQ6ICR7c2VsZWN0b3J9IGlzIG5vdCBhIGJ1dHRvbiBlbGVtZW50LmApO1xufVxuXG4vLyDwn5KtIG1vZGFsU3R1ZmZcbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZnVuY3Rpb24gdG9nZ2xlTW9kYWxTdGF0ZShtb2RhbFN0YXRlKSB7XG5cdGlmICghbW9kYWxTdGF0ZSkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1vZGFsIHN0YXRlIG9iamVjdCBwYXNzZWQgdG8gdG9nZ2xlTW9kYWxTdGF0ZSBmdW5jdGlvbi5gKTtcblx0aWYgKCFtb2RhbFN0YXRlLmNsb3NlQnV0dG9uU3RhdGUpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjbG9zZSBidXR0b24gc3RhdGUgb2JqZWN0IHBhc3NlZCB0byB0b2dnbGVNb2RhbFN0YXRlIGZ1bmN0aW9uLmApO1xuXG5cdG1vZGFsU3RhdGUubGlzdGVuZXJBdHRhY2hlZCA9ICFtb2RhbFN0YXRlLmxpc3RlbmVyQXR0YWNoZWQ7XG5cdG1vZGFsU3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkID0gIW1vZGFsU3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVNb2RhbEF0dHJpYnV0ZXMobW9kYWxFbGVtZW50KSB7XG5cdGNvbnN0IG1vZGFsT3BlbiA9IG1vZGFsRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJykgPT09ICd0cnVlJztcblxuXHRpZiAobW9kYWxPcGVuKSB7XG5cdFx0bW9kYWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcblx0XHRtb2RhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLW1vZGFsJywgJ3RydWUnKTtcblx0fSBlbHNlIHtcblx0XHRtb2RhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG5cdFx0bW9kYWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICdmYWxzZScpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVBc01vZGFsKG1vZGFsRWxlbWVudCkge1xuXHRtb2RhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLW1vZGFsJywgJ2ZhbHNlJyk7XG5cdG1vZGFsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbn1cblxuLy8gPj4+IGV4cG9ydHNcbi8vID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4vLyDwn5KtIGRzQ3JlYXRlRGlhbG9nQ29udHJvbGxlclxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjb250cm9sbGVyIG9iamVjdCBmb3IgbWFuYWdpbmcgYSBkaWFsb2cgZWxlbWVudCwgcHJvdmlkaW5nIG1ldGhvZHMgdG8gb3BlbiBhbmQgY2xvc2UgdGhlIGRpYWxvZy5cbiAqIFRoaXMgZnVuY3Rpb24gaW5pdGlhbGl6ZXMgdGhlIGRpYWxvZyBhcyBhIG1vZGFsLCBzZXRzIHVwIG5lY2Vzc2FyeSBhY2Nlc3NpYmlsaXR5IGF0dHJpYnV0ZXMsXG4gKiBhbmQgZW5zdXJlcyB0aGF0IHRoZSBkaWFsb2cgY2FuIGJlIHByb3Blcmx5IG1hbmFnZWQgdGhyb3VnaCBpdHMgbGlmZWN5Y2xlLlxuICpcbiAqIEl0cyBpbnRlbmRlZCB1c2UgaXMgdG8gcHJvdmlkZSBhIHNpbXBsZSB3YXkgdG8gbWFuYWdlIHRoZSB2aXNpYmlsaXR5IG9mIGEgZGlhbG9nIGVsZW1lbnQuXG4gKiBJdCBhYnN0cmFjdHMgb3V0IHRoZSBwZXNreSBhbmltYXRpbmcgaW4tYW5kLW91dCBjb251bmRydW0gb2YgbW9kYWwgZWxlbWVudHMgd2l0aCBhIENTUyBwcm9wZXJ0eSwgZGlzcGxheSBvZiBub25lICh0byBibG9jay9mbGV4L2dyaWQvZXRjLikuXG4gKiBTZWUgcmVhZG1lIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICogXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBkaWFsb2dFbGVtZW50IC0gVGhlIEhUTUwgZGlhbG9nIGVsZW1lbnQgdG8gaW5pdGlhbGl6ZSBhcyBhIG1vZGFsLlxuICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgbWV0aG9kcyB0byBtYW5hZ2UgdGhlIGRpYWxvZydzIHZpc2liaWxpdHkgYW5kIHN0YXRlLlxuICogXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIGludmFsaWQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIG5vdCBhIHZhbGlkIEhUTUwgZWxlbWVudC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgbm90IGEgdmFsaWQgSFRNTCA8ZGlhbG9nPiBlbGVtZW50LlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBkaWFsb2cgaXMgYWxyZWFkeSB2aXNpYmxlLlxuICogQHRocm93cyB7RXJyb3J9IElmIGEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byBkaWFsb2cuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgYSBsaXN0ZW5lciBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIGRpYWxvZydzIGNsb3NlIGJ1dHRvbi5cbiAqIFxuICogQGV4YW1wbGVcbiAqID8gQXNzdW1lICdteURpYWxvZycgaXMgYSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGRpYWxvZy5cbiAqIGNvbnN0IGRpYWxvZ0NvbnRyb2xsZXIgPSBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIobXlEaWFsb2cpO1xuICogXG4gKiA/IFRvIG9wZW4gdGhlIGRpYWxvZ1xuICogZGlhbG9nQ29udHJvbGxlci5vcGVuRGlhbG9nKCk7XG4gKiBcbiAqID8gVG8gY2xvc2UgdGhlIGRpYWxvZ1xuICogZGlhbG9nQ29udHJvbGxlci5jbG9zZURpYWxvZygpO1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIoZGlhbG9nRWxlbWVudCkge1xuXG5cdGZ1bmN0aW9uIGV4YW1pbmVBcmd1bWVudE9uQ2FsbChkaWFsb2dFbGVtZW50KSB7XG5cdFx0aWYgKCFkaWFsb2dFbGVtZW50KSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGRzQ3JlYXRlRGlhbG9nQ29udHJvbGxlciBmdW5jdGlvbi5gKTtcblx0XHRpZiAoIShkaWFsb2dFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBub3QgYSB2YWxpZCBIVE1MIGVsZW1lbnQuYCk7XG5cdFx0aWYgKGRpYWxvZ0VsZW1lbnQudGFnTmFtZSAhPT0gJ0RJQUxPRycpIHRocm93IG5ldyBFcnJvcihgVGhlIGVsZW1lbnQgeW91IHBhc3NlZCBpbiBpcyBub3QgYSBkaWFsb2cgZWxlbWVudC5gKTtcblx0fVxuXG5cdC8vIPCflLQgY2hlY2tQb2ludFxuXHRleGFtaW5lQXJndW1lbnRPbkNhbGwoZGlhbG9nRWxlbWVudCk7IFxuXHQvLyDwn5+iIGNsZWFyZWRTdWNjZXNzZnVsbHkgIVxuXG5cdGluaXRpYWxpemVBc01vZGFsKGRpYWxvZ0VsZW1lbnQpOyBcblxuXHRjb25zdCBkaWFsb2dTZWxlY3RvciA9IGRzR2V0U2VsZWN0b3IoZGlhbG9nRWxlbWVudCk7XG5cdGNvbnN0IGNsb3NlQnV0dG9uID0gZGlhbG9nRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZHMtY2xvc2UtYnV0dG9uJyk7XG5cblx0ZXhhbWluZUNsb3NlQnV0dG9uKGNsb3NlQnV0dG9uLCBkaWFsb2dTZWxlY3Rvcik7XG5cdGluaXRpYWxpemVDbG9zZUJ1dHRvbihjbG9zZUJ1dHRvbik7XG5cblx0bGV0IGRpYWxvZ1N0YXRlID0ge1xuXHRcdGxpc3RlbmVyQXR0YWNoZWQ6IGZhbHNlLFxuXHRcdGNsb3NlQnV0dG9uU3RhdGU6IHtcblx0XHRcdGxpc3RlbmVyQXR0YWNoZWQ6IGZhbHNlLFxuXHRcdH1cblx0fTtcblxuXHRjb25zdCBzYW5pdGl6ZURpYWxvZyA9ICgpID0+IHtcblx0XHRkaWFsb2dFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Nsb3NpbmcnKTtcblx0XHRkaWFsb2dFbGVtZW50LmNsb3NlKCk7XG5cblx0XHR0b2dnbGVNb2RhbEF0dHJpYnV0ZXMoZGlhbG9nRWxlbWVudCk7XG5cblx0XHRjbG9zZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlRGlhbG9nKTtcblx0XHRkaWFsb2dFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIHNhbml0aXplRGlhbG9nKTtcblxuXHRcdHRvZ2dsZU1vZGFsU3RhdGUoZGlhbG9nU3RhdGUpO1xuXHR9XG5cblx0Y29uc3QgY2xvc2VEaWFsb2cgPSAoKSA9PiB7XG5cdFx0ZGlhbG9nRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjbG9zaW5nJyk7XG5cdFx0ZGlhbG9nRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBzYW5pdGl6ZURpYWxvZyk7XG5cdH1cblxuXHRjb25zdCBpbnNwZWN0RGlhbG9nID0gKCkgPT4ge1xuXHRcdGlmIChkaWFsb2dFbGVtZW50Lm9wZW4pIHRocm93IG5ldyBFcnJvcihgVGhlIGZvbGxvd2luZyBkaWFsb2cgaXMgYWxyZWFkeSBvcGVuOiAke2RpYWxvZ1NlbGVjdG9yfS5gKTtcblx0XHRpZiAoZGlhbG9nU3RhdGUubGlzdGVuZXJBdHRhY2hlZCkgdGhyb3cgbmV3IEVycm9yKGBBIGxpc3RlbmVyIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhpcyBkaWFsb2cgZWxlbWVudDogJHtkaWFsb2dTZWxlY3Rvcn0uYCk7XG5cdFx0aWYgKGRpYWxvZ1N0YXRlLmNsb3NlQnV0dG9uU3RhdGUubGlzdGVuZXJBdHRhY2hlZCkgdGhyb3cgbmV3IEVycm9yKGBBIGxpc3RlbmVyIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhlIGNsb3NlIGJ1dHRvbiBvZiB0aGUgZGlhbG9nIGVsZW1lbnQ6ICR7ZGlhbG9nU2VsZWN0b3J9LmApO1xuXHR9XG5cblx0Y29uc3Qgb3BlbkRpYWxvZyA9ICgpID0+IHtcblx0XHQvLyDwn5S0IGNoZWNrUG9pbnRcblx0XHRpbnNwZWN0RGlhbG9nKCk7IFxuXHRcdC8vIPCfn6IgY2xlYXJlZFN1Y2Nlc3NmdWxseSAhXG5cblx0XHRkaWFsb2dFbGVtZW50LnNob3dNb2RhbCgpO1xuXHRcblx0XHR0b2dnbGVNb2RhbEF0dHJpYnV0ZXMoZGlhbG9nRWxlbWVudCk7XG5cdFx0Y2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZURpYWxvZyk7XG5cblx0XHR0b2dnbGVNb2RhbFN0YXRlKGRpYWxvZ1N0YXRlKTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0b3BlbkRpYWxvZyxcblx0XHRjbG9zZURpYWxvZ1xuXHR9XG59XG5cbi8vIPCfkq0gZHNDcmVhdGVMaWdodGJveENvbnRyb2xsZXJcbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY29udHJvbGxlciBvYmplY3QgZm9yIG1hbmFnaW5nIGFueSBlbGVtZW50IHdpdGggbW9kYWwtbGlrZSBmdW5jdGlvbmFsaXR5LCBwcm92aWRpbmcgbWV0aG9kcyB0byAnb3BlbicgYW5kICdjbG9zZScgdGhlIGxpZ2h0Ym94LlxuICogVGhpcyBmdW5jdGlvbiBpbml0aWFsaXplcyB0aGUgbGlnaHRib3ggYXMgYSBtb2RhbCwgc2V0cyB1cCBuZWNlc3NhcnkgYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzLFxuICogYW5kIGVuc3VyZXMgdGhhdCB0aGUgbGlnaHRib3ggY2FuIGJlIHByb3Blcmx5IG1hbmFnZWQgdGhyb3VnaCBpdHMgbGlmZWN5Y2xlLlxuICogXG4gKiBJdHMgaW50ZW5kZWQgdXNlIGlzIHRvIHByb3ZpZGUgYSBzaW1wbGUgd2F5IHRvIG1hbmFnZSB0aGUgdmlzaWJpbGl0eSBvZiBhIGxpZ2h0Ym94IGVsZW1lbnQuXG4gKiBJdCBhYnN0cmFjdHMgb3V0IHRoZSBwZXNreSBhbmltYXRpbmcgaW4tYW5kLW91dCBjb251bmRydW0gb2YgbW9kYWwtbGlrZSBlbGVtZW50cyB3aXRoIGEgQ1NTIHByb3BlcnR5LCBkaXNwbGF5IG9mIG5vbmUgKHRvIGJsb2NrL2ZsZXgvZ3JpZC9ldGMuKS5cbiAqIFNlZSByZWFkbWUgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbGlnaHRib3hFbGVtZW50IC0gQW55IEhUTUwgY29udGFpbmVyIGVsZW1lbnQgKGllLiwgPGRpdj4pIHRvIGluaXRpYWxpemUgYXMgYSBtb2RhbC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IEFuIG9iamVjdCBjb250YWluaW5nIG1ldGhvZHMgdG8gbWFuYWdlIHRoZSBsaWdodGJveGVzJ3MgdmlzaWJpbGl0eSBhbmQgc3RhdGUuXG4gKiBcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgaW52YWxpZC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgbm90IGEgdmFsaWQgSFRNTCBlbGVtZW50LlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBsaWdodGJveCBpcyBhbHJlYWR5IHZpc2libGUuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgYSBsaXN0ZW5lciBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIGxpZ2h0Ym94LlxuICogQHRocm93cyB7RXJyb3J9IElmIGEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byBsaWdodGJveCdzIGNsb3NlIGJ1dHRvbi5cbiAqIFxuICogQGV4YW1wbGVcbiAqID8gQXNzdW1lICdteUxpZ2h0Ym94JyBpcyBhIERPTSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgZGlhbG9nLlxuICogY29uc3QgbGlnaHRCb3hDb250cm9sbGVyID0gZHNDcmVhdGVMaWdodGJveENvbnRyb2xsZXIobXlMaWdodGJveCk7XG4gKiBcbiAqID8gVG8gb3BlbiB0aGUgbGlnaHRib3hcbiAqIGxpZ2h0Qm94Q29udHJvbGxlci5vcGVuTGlnaHRib3goKTtcbiAqIFxuICogPyBUbyBjbG9zZSB0aGUgbGlnaHRib3hcbiAqIGxpZ2h0Qm94Q29udHJvbGxlci5jbG9zZUxpZ2h0Ym94KCk7XG4gKiBcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZHNDcmVhdGVMaWdodGJveENvbnRyb2xsZXIobGlnaHRib3hFbGVtZW50KSB7XG5cblx0ZnVuY3Rpb24gZXhhbWluZUFyZ3VtZW50T25DYWxsKCkge1xuXHRcdGlmICghbGlnaHRib3hFbGVtZW50KSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGRzQ3JlYXRlRGlhbG9nQ29udHJvbGxlciBmdW5jdGlvbi5gKTtcblx0XHRpZiAoIShsaWdodGJveEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHRocm93IG5ldyBFcnJvcihgVGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIG5vdCBhIHZhbGlkIEhUTUwgZWxlbWVudC5gKTtcblx0fVxuXG5cdC8vIPCflLQgY2hlY2tQb2ludFxuXHRleGFtaW5lQXJndW1lbnRPbkNhbGwoKTsgLy8gISBjaGVja1BvaW50XG5cdC8vIPCfn6IgY2xlYXJlZFN1Y2Nlc3NmdWxseSAhXG5cblx0aW5pdGlhbGl6ZUFzTW9kYWwobGlnaHRib3hFbGVtZW50KTtcblxuXHRjb25zdCBsaWdodEJveFNlbGVjdG9yID0gZHNHZXRTZWxlY3RvcihsaWdodGJveEVsZW1lbnQpO1xuXHRjb25zdCBjbG9zZUJ1dHRvbiA9IGxpZ2h0Ym94RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZHMtY2xvc2UtYnV0dG9uJyk7XG5cblx0ZXhhbWluZUNsb3NlQnV0dG9uKGNsb3NlQnV0dG9uLCBsaWdodEJveFNlbGVjdG9yKTtcblx0aW5pdGlhbGl6ZUNsb3NlQnV0dG9uKGNsb3NlQnV0dG9uKTtcblxuXHRsZXQgbGlnaHRib3hTdGF0ZSA9IHtcblx0XHRsaXN0ZW5lckF0dGFjaGVkOiBmYWxzZSxcblx0XHRjbG9zZUJ1dHRvblN0YXRlOiB7XG5cdFx0XHRsaXN0ZW5lckF0dGFjaGVkOiBmYWxzZSxcblx0XHR9XG5cdH07XG5cblx0Y29uc3QgY2xlYW5MaWdodEJveCA9ICgpID0+IHtcblx0XHRsaWdodGJveEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2xvc2luZycpO1xuXHRcdGxpZ2h0Ym94RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG5cblx0XHR0b2dnbGVNb2RhbEF0dHJpYnV0ZXMobGlnaHRib3hFbGVtZW50KTtcblx0XHRcblx0XHRjbG9zZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTGlnaHRib3gpO1xuXHRcdGxpZ2h0Ym94RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBjbGVhbkxpZ2h0Qm94KTtcblxuXHRcdHRvZ2dsZU1vZGFsU3RhdGUobGlnaHRib3hTdGF0ZSk7XG5cdH1cblxuXHRjb25zdCBjbG9zZUxpZ2h0Ym94ID0gKCkgPT4ge1xuXHRcdGxpZ2h0Ym94RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjbG9zaW5nJyk7XG5cdFx0bGlnaHRib3hFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGNsZWFuTGlnaHRCb3gpO1xuXHR9XG5cblx0Y29uc3QgaW5zcGVjdExpZ2h0Ym94ID0gKCkgPT4ge1xuXHRcdGlmIChsaWdodGJveEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJykpIHRocm93IG5ldyBFcnJvcihgVGhlIGZvbGxvd2luZyBsaWdodGJveCBpcyBhbHJlYWR5IHZpc2libGU6ICR7bGlnaHRCb3hTZWxlY3Rvcn0uYCk7XG5cdFx0aWYgKGxpZ2h0Ym94U3RhdGUubGlzdGVuZXJBdHRhY2hlZCkgdGhyb3cgbmV3IEVycm9yKGBBIGxpc3RlbmVyIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhlIGxpZ2h0Ym94IGVsZW1lbnQ6ICR7bGlnaHRCb3hTZWxlY3Rvcn0uYCk7XG5cdFx0aWYgKGxpZ2h0Ym94U3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkKSB0aHJvdyBuZXcgRXJyb3IoYEEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byB0aGUgY2xvc2UgYnV0dG9uIG9mIHRoZSBsaWdodGJveDogJHtsaWdodEJveFNlbGVjdG9yfS5gKTtcblx0fVxuXG5cdGNvbnN0IG9wZW5MaWdodGJveCA9ICgpID0+IHtcblx0XHQvLyDwn5S0IGNoZWNrUG9pbnRcblx0XHRpbnNwZWN0TGlnaHRib3goKTtcblx0XHQvLyDwn5+iIGNsZWFyZWRTdWNjZXNzZnVsbHkgIVxuXHRcdFxuXHRcdGxpZ2h0Ym94RWxlbWVudC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG5cblx0XHR0b2dnbGVNb2RhbEF0dHJpYnV0ZXMobGlnaHRib3hFbGVtZW50KTtcblx0XHRjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTGlnaHRib3gpO1xuXG5cdFx0dG9nZ2xlTW9kYWxTdGF0ZShsaWdodGJveFN0YXRlKTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0b3BlbkxpZ2h0Ym94LFxuXHRcdGNsb3NlTGlnaHRib3hcblx0fVxufVxuXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vID8gRnVuIGZhY3Q6IFxuLy8gPyBMaWdodGJveGVzIGFyZSBuYW1lZCBhZnRlciB0aGUgbGlnaHRib3ggdGhhdCBwaG90b2dyYXBoZXJzIHVzZSB0byB2aWV3IHNsaWRlcy5cbi8vID8gVGhleSBhcmUgYWxzbyBhIGZhbmNpZXIgd2F5IHRvIHNheSAnbW9kYWwnIGluIHRoaXMgcmVhbG0uXG4iLCJpbXBvcnQgeyBjcmVhdGVTcGxpdFRleHRGcmFnbWVudCB9IGZyb20gXCIuL3NwbGl0LXRleHRcIjtcblxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiByYW5kb21pemVDaGFyYWN0ZXJMb2NhdGlvbnMobm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMpIHtcbiAgbm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4ge1xuICAgIGNvbnN0IHJhbmRvbU51bWJlciA9IE1hdGgucmFuZG9tKCk7XG5cbiAgICBpZiAocmFuZG9tTnVtYmVyID49IDAgJiYgcmFuZG9tTnVtYmVyIDwgMC4yNSkge1xuICAgICAgY2hhcmFjdGVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMzMpfXB4LCAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMzMyl9cHgpYDtcbiAgICB9IGVsc2UgaWYgKHJhbmRvbU51bWJlciA+PSAwLjI1ICYmIHJhbmRvbU51bWJlciA8IDAuNSkge1xuICAgICAgY2hhcmFjdGVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAtMzMzKX1weCwgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAtMzMzKX1weClgO1xuICAgIH0gZWxzZSBpZiAocmFuZG9tTnVtYmVyID49IDAuNSAmJiByYW5kb21OdW1iZXIgPCAwLjc1KSB7XG4gICAgICBjaGFyYWN0ZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMzMyl9cHgsICR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogLTMzMyl9cHgpYDtcbiAgICB9IGVsc2UgeyAvLyA/IHJhbmRvbU51bWJlciA8PSAwLjI1XG4gICAgICBjaGFyYWN0ZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIC0zMzMpfXB4LCAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMzMyl9cHgpYDtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTW9kYWxMaXN0ZW5lcnMoKSB7XG4gIGNvbnN0IGFkZExpc3RlbmVyRm9yTW9kYWxPcGVuID0gKG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzKSA9PiB7XG4gICAgY29uc3Qgb3Blbk1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wZW4tbW9kYWwtYnV0dG9uJyk7XG5cbiAgICBvcGVuTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBub25XaGl0ZXNwYWNlQ2hhcmFjdGVycy5mb3JFYWNoKG5vbldoaXRlc3BhY2VDaGFyYWN0ZXIgPT4gbm9uV2hpdGVzcGFjZUNoYXJhY3Rlci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKDAsIDApJyk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgYWRkTGlzdGVuZXJGb3JNb2RhbENsb3NlID0gKG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzKSA9PiB7XG4gICAgY29uc3QgY2xvc2VNb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcy1jbG9zZS1idXR0b24nKTtcblxuICAgIGNsb3NlTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICByYW5kb21pemVDaGFyYWN0ZXJMb2NhdGlvbnMobm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMpO1xuICAgIH0pO1xuICB9XG5cbiAgY29uc3Qgbm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhcmFjdGVyLm5vbi13aGl0ZXNwYWNlJyk7XG4gIGFkZExpc3RlbmVyRm9yTW9kYWxPcGVuKG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzKTtcbiAgYWRkTGlzdGVuZXJGb3JNb2RhbENsb3NlKG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVNb2RhbENvbnRlbnQoKSB7XG4gIGNvbnN0IGdldFNwbGl0RWxlbWVudEZyYWdtZW50ID0gKGVsZW1lbnRUb1NwbGl0LCBlbGVtZW50VG9BcHBlbmRGcmFnbWVudCwgaWRlbnRpZmllckZvckVhY2hTcGxpdEVsZW1lbnQpID0+IHtcbiAgICBlbGVtZW50VG9BcHBlbmRGcmFnbWVudC5hcHBlbmRDaGlsZChjcmVhdGVTcGxpdFRleHRGcmFnbWVudChlbGVtZW50VG9TcGxpdCwgaWRlbnRpZmllckZvckVhY2hTcGxpdEVsZW1lbnQpKTtcblxuICAgIHJldHVybiBlbGVtZW50VG9BcHBlbmRGcmFnbWVudDtcbiAgfTtcblxuICBjb25zdCBpZGVudGlmeU5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzID0gKHNwbGl0VGV4dCkgPT4ge1xuICAgIGNvbnN0IG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGl0VGV4dC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGQgPSBzcGxpdFRleHQuY2hpbGRyZW5baV07XG4gICAgICBpZiAoY2hpbGQudGV4dENvbnRlbnQudHJpbSgpICE9PSAnJykgbm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMucHVzaChjaGlsZCk7XG4gICAgfVxuXG4gICAgbm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4gY2hhcmFjdGVyLmNsYXNzTGlzdC5hZGQoJ25vbi13aGl0ZXNwYWNlJykpO1xuXG4gICAgcmV0dXJuIG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzO1xuICB9O1xuXG4gIGNvbnN0IHJlcGxhY2VFbGVtZW50ID0gKGNvbnRhaW5lciwgbmV3RWxlbWVudCwgb2xkRWxlbWVudCkgPT4ge1xuICAgIGNvbnRhaW5lci5yZXBsYWNlQ2hpbGQobmV3RWxlbWVudCwgb2xkRWxlbWVudCk7XG4gIH1cblxuICBjb25zdCBwcmVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYy1jb250YWluZXInKTtcbiAgY29uc3QgcHJlID0gcHJlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3ByZScpO1xuXG4gIGNvbnN0IG5ld1ByZSA9IGdldFNwbGl0RWxlbWVudEZyYWdtZW50KHByZSwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncHJlJyksICdjaGFyYWN0ZXInKTtcbiAgcmVwbGFjZUVsZW1lbnQocHJlQ29udGFpbmVyLCBuZXdQcmUsIHByZSk7XG5cbiAgcmFuZG9taXplQ2hhcmFjdGVyTG9jYXRpb25zKGlkZW50aWZ5Tm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMobmV3UHJlKSk7XG59XG5cbmluaXRpYWxpemVNb2RhbENvbnRlbnQoKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgYWRkTW9kYWxMaXN0ZW5lcnMpOyIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGxpdFRleHRGcmFnbWVudChlbGVtZW50LCBpZCkge1xuICBjb25zdCBnZXROb25XaGl0ZXNwYWNlQ2hhcmFjdGVycyA9IChlbGVtZW50KSA9PiB7XG5cbiAgICBcbiAgfTtcblxuICBjb25zdCBzcGxpdFRleHRGcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgY29uc3QgdGV4dCA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG5cbiAgdGV4dC5zcGxpdCgnJykuZm9yRWFjaCgoY2hhcmFjdGVyLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGNoYXJhY3RlclNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgY2hhcmFjdGVyU3Bhbi5zZXRBdHRyaWJ1dGUoJ2lkJywgYCR7aWR9LSR7aW5kZXggKyAxfWApO1xuICAgIGNoYXJhY3RlclNwYW4uY2xhc3NMaXN0LmFkZCgnY2hhcmFjdGVyJyk7XG5cbiAgICAvLyBVc2UgYSBub24tYnJlYWtpbmcgc3BhY2UgZm9yIHNwYWNlcyB0byBlbnN1cmUgdGhleSBhcmUgcHJlc2VydmVkXG4gICAgY2hhcmFjdGVyU3Bhbi50ZXh0Q29udGVudCA9IGNoYXJhY3RlciA9PT0gJyAnID8gJ1xcdTAwQTAnIDogY2hhcmFjdGVyO1xuXG4gICAgc3BsaXRUZXh0RnJhZ21lbnQuYXBwZW5kQ2hpbGQoY2hhcmFjdGVyU3Bhbik7XG4gIH0pO1xuXG4gIHJldHVybiBzcGxpdFRleHRGcmFnbWVudDtcbn0iLCJpbXBvcnQgeyBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIgfSBmcm9tIFwiLi9kaXNwbGF5U3R1ZmZcIjtcblxuaW1wb3J0IHsgaW5pdGlhbGl6ZU1vZGFsQ29udGVudCwgYWRkTW9kYWxMaXN0ZW5lcnMgfSBmcm9tICcuL2ZsdWZmJzsgXG5pbXBvcnQgJy4vc2Fzcy9tYWluLnNjc3MnO1xuXG5mdW5jdGlvbiBpbml0QXBwKCkge1xuICBpbml0aWFsaXplTW9kYWxDb250ZW50KCk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgYWRkTW9kYWxMaXN0ZW5lcnMpO1xufTtcblxuaW5pdEFwcCgpO1xuXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vID8gc3JjL2Rpc3BsYXlTdHVmZi5qc1xuXG5jb25zdCBkaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaWFsb2cnKTtcbmNvbnN0IGRpYWxvZ0NvbnRyb2xsZXIgPSBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIoZGlhbG9nKTtcblxuY29uc3Qgb3Blbk1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wZW4tbW9kYWwtYnV0dG9uJyk7XG5cbm9wZW5Nb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZGlhbG9nQ29udHJvbGxlci5vcGVuRGlhbG9nKCk7XG59KTtcblxuXG5cblxuIl0sIm5hbWVzIjpbInRvZ2dsZU1vZGFsU3RhdGUiLCJtb2RhbFN0YXRlIiwiRXJyb3IiLCJjbG9zZUJ1dHRvblN0YXRlIiwibGlzdGVuZXJBdHRhY2hlZCIsInRvZ2dsZU1vZGFsQXR0cmlidXRlcyIsIm1vZGFsRWxlbWVudCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInJhbmRvbWl6ZUNoYXJhY3RlckxvY2F0aW9ucyIsIm5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzIiwiZm9yRWFjaCIsImNoYXJhY3RlciIsInJhbmRvbU51bWJlciIsIk1hdGgiLCJyYW5kb20iLCJzdHlsZSIsInRyYW5zZm9ybSIsImNvbmNhdCIsImZsb29yIiwiYWRkTW9kYWxMaXN0ZW5lcnMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm5vbldoaXRlc3BhY2VDaGFyYWN0ZXIiLCJhZGRMaXN0ZW5lckZvck1vZGFsT3BlbiIsImFkZExpc3RlbmVyRm9yTW9kYWxDbG9zZSIsImluaXRpYWxpemVNb2RhbENvbnRlbnQiLCJlbGVtZW50VG9TcGxpdCIsImVsZW1lbnRUb0FwcGVuZEZyYWdtZW50IiwiZWxlbWVudCIsInNwbGl0VGV4dEZyYWdtZW50IiwibmV3RWxlbWVudCIsIm9sZEVsZW1lbnQiLCJwcmVDb250YWluZXIiLCJwcmUiLCJuZXdQcmUiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwidGV4dENvbnRlbnQiLCJzcGxpdCIsImluZGV4IiwiY2hhcmFjdGVyU3BhbiIsImNsYXNzTGlzdCIsImFkZCIsInJlcGxhY2VDaGlsZCIsInNwbGl0VGV4dCIsImkiLCJjaGlsZHJlbiIsImxlbmd0aCIsImNoaWxkIiwidHJpbSIsInB1c2giLCJpZGVudGlmeU5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzIiwid2luZG93IiwiZGlhbG9nQ29udHJvbGxlciIsImRpYWxvZ0VsZW1lbnQiLCJIVE1MRWxlbWVudCIsInRhZ05hbWUiLCJleGFtaW5lQXJndW1lbnRPbkNhbGwiLCJkaWFsb2dTZWxlY3RvciIsImlkIiwiY2xhc3NOYW1lIiwiam9pbiIsImNsb3NlQnV0dG9uIiwic2VsZWN0b3IiLCJleGFtaW5lQ2xvc2VCdXR0b24iLCJpbml0aWFsaXplQ2xvc2VCdXR0b24iLCJkaWFsb2dTdGF0ZSIsInNhbml0aXplRGlhbG9nIiwicmVtb3ZlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VEaWFsb2ciLCJvcGVuRGlhbG9nIiwib3BlbiIsImluc3BlY3REaWFsb2ciLCJzaG93TW9kYWwiLCJkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIiXSwic291cmNlUm9vdCI6IiJ9