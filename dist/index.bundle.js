(()=>{"use strict";function t(t,e,n){var o=function(t){"Escape"===t.key&&n.open&&(t.preventDefault(),e.click())};t?window.removeEventListener("keydown",o):window.addEventListener("keydown",o)}function e(t,e,n){t?e.removeEventListener("click",n):e.addEventListener("click",n)}function n(t){if(!t)throw new Error("Invalid modal state object passed to toggleModalState function.");t.open=!t.open,t.listenerAttached=!t.listenerAttached,t.escapeKeyListenerAttached=!t.escapeKeyListenerAttached,t.closeButtonState.listenerAttached=!t.closeButtonState.listenerAttached}function o(t){"true"===t.getAttribute("aria-hidden")?(t.setAttribute("aria-hidden","false"),t.setAttribute("aria-modal","true")):(t.setAttribute("aria-hidden","true"),t.setAttribute("aria-modal","false"))}function a(t){t.forEach((function(t){var e=Math.random();t.style.transform=e>=0&&e<.25?"translate(".concat(Math.floor(333*Math.random()),"px, ").concat(Math.floor(333*Math.random()),"px)"):e>=.25&&e<.5?"translate(".concat(Math.floor(-333*Math.random()),"px, ").concat(Math.floor(-333*Math.random()),"px)"):e>=.5&&e<.75?"translate(".concat(Math.floor(333*Math.random()),"px, ").concat(Math.floor(-333*Math.random()),"px)"):"translate(".concat(Math.floor(-333*Math.random()),"px, ").concat(Math.floor(333*Math.random()),"px)")}))}var r,c,i,l,s,d,u,h,f;u=document.querySelector("#c-container"),h=u.querySelector("pre"),r=h,(c=document.createElement("pre")).appendChild((i=r,l=document.createDocumentFragment(),i.textContent.split("").forEach((function(t,e){var n=document.createElement("span");n.setAttribute("id","".concat("character","-").concat(e+1)),n.classList.add("character"),n.textContent=" "===t?" ":t,l.appendChild(n)})),l)),s=f=c,d=h,u.replaceChild(s,d),a(function(t){for(var e=[],n=0;n<t.children.length;n++){var o=t.children[n];""!==o.textContent.trim()&&e.push(o)}return e.forEach((function(t){return t.classList.add("non-whitespace")})),e}(f)),window.addEventListener("load",(function(){var t=document.querySelectorAll(".character.non-whitespace");!function(t){document.querySelector("#open-modal-button").addEventListener("click",(function(){t.forEach((function(t){return t.style.transform="translate(0, 0)"}))}))}(t),function(t){document.querySelector(".ds-close-button").addEventListener("click",(function(){a(t)}))}(t)}));var m=function(a){var r;!function(t){if(!t)throw new Error("Invalid argument passed to dsCreateDialogController function.");if(!(t instanceof HTMLElement))throw new Error("The provided argument is not a valid HTML element.");if("DIALOG"!==t.tagName)throw new Error("The element you passed in is not a dialog element.")}(a),(r=a).setAttribute("aria-modal","false"),r.setAttribute("aria-hidden","true");var c=function(t){return t.id?"#".concat(t.id):t.className?".".concat(t.className.split(" ").join(".")):"specified element"}(a),i=a.querySelector(".ds-close-button");(function(t,e){if(!t)throw new Error("Close button not found for the modal element: ".concat(e,"… Double check to ensure it has a class of '.ds-close-button'."));if("BUTTON"!==t.tagName)throw new Error("The close button for the modal element: ".concat(e," is not a button element."))})(i,c),function(t){t.setAttribute("aria-label","Close Dialog")}(i);var l={open:!1,listenerAttached:!1,escapeKeyListenerAttached:!1,closeButtonState:{listenerAttached:!1}},s=function r(){a.classList.remove("closing"),a.close(),o(a),e(l.closeButtonState.listenerAttached,i,d),t(l.escapeKeyListenerAttached,i,l),a.removeEventListener("animationend",r),n(l)},d=function(){a.classList.add("closing"),a.addEventListener("animationend",s)};return{openDialog:function(){!function(){if(a.open)throw new Error("The following dialog is already open: ".concat(c,"."));if(l.listenerAttached)throw new Error("A listener is already attached to this dialog element: ".concat(c,"."));if(l.closeButtonState.listenerAttached)throw new Error("A listener is already attached to the close button of the dialog element: ".concat(c,"."))}(),a.showModal(),o(a),e(l.closeButtonState.listenerAttached,i,d),t(l.escapeKeyListenerAttached,i,l),n(l)},closeDialog:d}}(document.querySelector("dialog"));document.querySelector("#open-modal-button").addEventListener("click",(function(){m.openDialog()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxpQkFBaUJGLGlCQUFrQmhCLEVBQWFvRixHQUN0RnRGLEVBQXdCa0YsRUFBWS9ELDBCQUEyQmpCLEVBQWFnRixHQUU1RW5FLEVBQWlCbUUsRUFDbEIsRUFJQ0ksWUFBQUEsRUFFRixDRzNKeUJJLENBRFY3QyxTQUFTQyxjQUFjLFdBR2RELFNBQVNDLGNBQWMsc0JBRS9CbEMsaUJBQWlCLFNBQVMsV0FDeEN5RCxFQUFpQmtCLFlBQ25CLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kaXNwbGF5LXN0dWZmLXVpLy4vc3JjL2Rpc3BsYXktc3R1ZmYtdWkuanMiLCJ3ZWJwYWNrOi8vZGlzcGxheS1zdHVmZi11aS8uL3NyYy9mbHVmZi5qcyIsIndlYnBhY2s6Ly9kaXNwbGF5LXN0dWZmLXVpLy4vc3JjL3NwbGl0LXRleHQuanMiLCJ3ZWJwYWNrOi8vZGlzcGxheS1zdHVmZi11aS8uL3NyYy9hcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g8J+SrSBCb3RoIFN0dWZmXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIGRzR2V0U2VsZWN0b3IoZWxlbWVudCkge1xuXHRyZXR1cm4gZWxlbWVudC5pZCA/IGAjJHtlbGVtZW50LmlkfWAgOiBlbGVtZW50LmNsYXNzTmFtZSA/IGAuJHtlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJy4nKX1gIDogJ3NwZWNpZmllZCBlbGVtZW50Jztcbn1cblxuLy8g8J+SrSBjbG9zZUJ1dHRvblN0dWZmXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIGluaXRpYWxpemVDbG9zZUJ1dHRvbihjbG9zZUJ1dHRvbikge1xuXHRjbG9zZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnQ2xvc2UgRGlhbG9nJyk7XG59XG5cbmZ1bmN0aW9uIGV4YW1pbmVDbG9zZUJ1dHRvbihjbG9zZUJ1dHRvbiwgc2VsZWN0b3IpIHtcblx0aWYgKCFjbG9zZUJ1dHRvbikgdGhyb3cgbmV3IEVycm9yKGBDbG9zZSBidXR0b24gbm90IGZvdW5kIGZvciB0aGUgbW9kYWwgZWxlbWVudDogJHtzZWxlY3Rvcn3igKYgRG91YmxlIGNoZWNrIHRvIGVuc3VyZSBpdCBoYXMgYSBjbGFzcyBvZiAnLmRzLWNsb3NlLWJ1dHRvbicuYCk7XG5cdGlmIChjbG9zZUJ1dHRvbi50YWdOYW1lICE9PSAnQlVUVE9OJykgdGhyb3cgbmV3IEVycm9yKGBUaGUgY2xvc2UgYnV0dG9uIGZvciB0aGUgbW9kYWwgZWxlbWVudDogJHtzZWxlY3Rvcn0gaXMgbm90IGEgYnV0dG9uIGVsZW1lbnQuYCk7XG59XG5cbi8vIPCfkq0gbW9kYWxTdHVmZlxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiB0b2dnbGVFc2NhcGVLZXlMaXN0ZW5lcihpc0xpc3RlbmVyQXR0YWNoZWQsIGNsb3NlQnV0dG9uLCBkaWFsb2dPckxpZ2h0Qm94U3RhdGUpIHtcblx0Y29uc3QgbW9kaWZpZWRFc2NhcGVLZXlDYWxsYmFjayA9IChldmVudCkgPT4ge1xuXHRcdGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnICYmIGRpYWxvZ09yTGlnaHRCb3hTdGF0ZS5vcGVuKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Y2xvc2VCdXR0b24uY2xpY2soKTtcblx0XHR9XG5cdH07XG5cblx0KGlzTGlzdGVuZXJBdHRhY2hlZCkgXG5cdFx0P1x0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBtb2RpZmllZEVzY2FwZUtleUNhbGxiYWNrKVxuXHRcdDogd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBtb2RpZmllZEVzY2FwZUtleUNhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlQ2xvc2VCdXR0b25MaXN0ZW5lcihpc0xpc3RlbmVyQXR0YWNoZWQsIGNsb3NlQnV0dG9uLCBjbG9zZU1vZGFsQ2FsbGJhY2spIHtcblx0KGlzTGlzdGVuZXJBdHRhY2hlZCkgXG5cdFx0PyBjbG9zZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWxDYWxsYmFjaylcblx0XHQ6IGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbENhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlTW9kYWxTdGF0ZShtb2RhbFN0YXRlKSB7XG5cdGlmICghbW9kYWxTdGF0ZSkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1vZGFsIHN0YXRlIG9iamVjdCBwYXNzZWQgdG8gdG9nZ2xlTW9kYWxTdGF0ZSBmdW5jdGlvbi5gKTtcblxuXHRtb2RhbFN0YXRlLm9wZW4gPSAhbW9kYWxTdGF0ZS5vcGVuO1xuXHRtb2RhbFN0YXRlLmxpc3RlbmVyQXR0YWNoZWQgPSAhbW9kYWxTdGF0ZS5saXN0ZW5lckF0dGFjaGVkO1xuXHRtb2RhbFN0YXRlLmVzY2FwZUtleUxpc3RlbmVyQXR0YWNoZWQgPSAhbW9kYWxTdGF0ZS5lc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkO1xuXHRtb2RhbFN0YXRlLmNsb3NlQnV0dG9uU3RhdGUubGlzdGVuZXJBdHRhY2hlZCA9ICFtb2RhbFN0YXRlLmNsb3NlQnV0dG9uU3RhdGUubGlzdGVuZXJBdHRhY2hlZDtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlTW9kYWxBdHRyaWJ1dGVzKG1vZGFsRWxlbWVudCkge1xuXHRjb25zdCBtb2RhbE9wZW4gPSBtb2RhbEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpID09PSAndHJ1ZSc7XG5cblx0aWYgKG1vZGFsT3Blbikge1xuXHRcdG1vZGFsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG5cdFx0bW9kYWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICd0cnVlJyk7XG5cdH0gZWxzZSB7XG5cdFx0bW9kYWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuXHRcdG1vZGFsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnLCAnZmFsc2UnKTtcblx0fVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplQXNNb2RhbChtb2RhbEVsZW1lbnQpIHtcblx0bW9kYWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICdmYWxzZScpO1xuXHRtb2RhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG59XG5cbi8vID4+PiBleHBvcnRzXG4vLyA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuLy8g8J+SrSBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXJcbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY29udHJvbGxlciBvYmplY3QgZm9yIG1hbmFnaW5nIGEgZGlhbG9nIGVsZW1lbnQsIHByb3ZpZGluZyBtZXRob2RzIHRvIG9wZW4gYW5kIGNsb3NlIHRoZSBkaWFsb2cuXG4gKiBUaGlzIGZ1bmN0aW9uIGluaXRpYWxpemVzIHRoZSBkaWFsb2cgYXMgYSBtb2RhbCwgc2V0cyB1cCBuZWNlc3NhcnkgYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzLFxuICogYW5kIGVuc3VyZXMgdGhhdCB0aGUgZGlhbG9nIGNhbiBiZSBwcm9wZXJseSBtYW5hZ2VkIHRocm91Z2ggaXRzIGxpZmVjeWNsZS5cbiAqXG4gKiBJdHMgaW50ZW5kZWQgdXNlIGlzIHRvIHByb3ZpZGUgYSBzaW1wbGUgd2F5IHRvIG1hbmFnZSB0aGUgdmlzaWJpbGl0eSBvZiBhIGRpYWxvZyBlbGVtZW50LlxuICogSXQgYWJzdHJhY3RzIG91dCB0aGUgcGVza3kgYW5pbWF0aW5nIGluLWFuZC1vdXQgY29udW5kcnVtIG9mIG1vZGFsIGVsZW1lbnRzIHdpdGggYSBDU1MgcHJvcGVydHksIGRpc3BsYXkgb2Ygbm9uZSAodG8gYmxvY2svZmxleC9ncmlkL2V0Yy4pLlxuICogU2VlIHJlYWRtZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqIFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZGlhbG9nRWxlbWVudCAtIFRoZSBIVE1MIGRpYWxvZyBlbGVtZW50IHRvIGluaXRpYWxpemUgYXMgYSBtb2RhbC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IEFuIG9iamVjdCBjb250YWluaW5nIG1ldGhvZHMgdG8gbWFuYWdlIHRoZSBkaWFsb2cncyB2aXNpYmlsaXR5IGFuZCBzdGF0ZS5cbiAqIFxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBpbnZhbGlkLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBub3QgYSB2YWxpZCBIVE1MIGVsZW1lbnQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIG5vdCBhIHZhbGlkIEhUTUwgPGRpYWxvZz4gZWxlbWVudC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgZGlhbG9nIGlzIGFscmVhZHkgdmlzaWJsZS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBhIGxpc3RlbmVyIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gZGlhbG9nLlxuICogQHRocm93cyB7RXJyb3J9IElmIGEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byBkaWFsb2cncyBjbG9zZSBidXR0b24uXG4gKiBcbiAqIEBleGFtcGxlXG4gKiA/IEFzc3VtZSAnbXlEaWFsb2cnIGlzIGEgRE9NIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBkaWFsb2cuXG4gKiBjb25zdCBkaWFsb2dDb250cm9sbGVyID0gZHNDcmVhdGVEaWFsb2dDb250cm9sbGVyKG15RGlhbG9nKTtcbiAqIFxuICogPyBUbyBvcGVuIHRoZSBkaWFsb2dcbiAqIGRpYWxvZ0NvbnRyb2xsZXIub3BlbkRpYWxvZygpO1xuICogXG4gKiA/IFRvIGNsb3NlIHRoZSBkaWFsb2dcbiAqIGRpYWxvZ0NvbnRyb2xsZXIuY2xvc2VEaWFsb2coKTtcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZHNDcmVhdGVEaWFsb2dDb250cm9sbGVyKGRpYWxvZ0VsZW1lbnQpIHtcblxuXHRmdW5jdGlvbiBleGFtaW5lQXJndW1lbnRPbkNhbGwoZGlhbG9nRWxlbWVudCkge1xuXHRcdGlmICghZGlhbG9nRWxlbWVudCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFyZ3VtZW50IHBhc3NlZCB0byBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIgZnVuY3Rpb24uYCk7XG5cdFx0aWYgKCEoZGlhbG9nRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgdGhyb3cgbmV3IEVycm9yKGBUaGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgbm90IGEgdmFsaWQgSFRNTCBlbGVtZW50LmApO1xuXHRcdGlmIChkaWFsb2dFbGVtZW50LnRhZ05hbWUgIT09ICdESUFMT0cnKSB0aHJvdyBuZXcgRXJyb3IoYFRoZSBlbGVtZW50IHlvdSBwYXNzZWQgaW4gaXMgbm90IGEgZGlhbG9nIGVsZW1lbnQuYCk7XG5cdH1cblxuXHQvLyDwn5S0IGNoZWNrUG9pbnRcblx0ZXhhbWluZUFyZ3VtZW50T25DYWxsKGRpYWxvZ0VsZW1lbnQpOyBcblx0Ly8g8J+foiBjbGVhcmVkU3VjY2Vzc2Z1bGx5ICFcblxuXHRpbml0aWFsaXplQXNNb2RhbChkaWFsb2dFbGVtZW50KTsgXG5cblx0Y29uc3QgZGlhbG9nU2VsZWN0b3IgPSBkc0dldFNlbGVjdG9yKGRpYWxvZ0VsZW1lbnQpO1xuXHRjb25zdCBjbG9zZUJ1dHRvbiA9IGRpYWxvZ0VsZW1lbnQucXVlcnlTZWxlY3RvcignLmRzLWNsb3NlLWJ1dHRvbicpO1xuXG5cdGV4YW1pbmVDbG9zZUJ1dHRvbihjbG9zZUJ1dHRvbiwgZGlhbG9nU2VsZWN0b3IpO1xuXHRpbml0aWFsaXplQ2xvc2VCdXR0b24oY2xvc2VCdXR0b24pO1xuXG5cdGxldCBkaWFsb2dTdGF0ZSA9IHtcblx0XHRvcGVuOiBmYWxzZSxcblx0XHRsaXN0ZW5lckF0dGFjaGVkOiBmYWxzZSxcblx0XHRlc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkOiBmYWxzZSxcblx0XHRjbG9zZUJ1dHRvblN0YXRlOiB7XG5cdFx0XHRsaXN0ZW5lckF0dGFjaGVkOiBmYWxzZSxcblx0XHR9XG5cdH07XG5cblx0Y29uc3Qgc2FuaXRpemVEaWFsb2cgPSAoKSA9PiB7XG5cdFx0ZGlhbG9nRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjbG9zaW5nJyk7XG5cdFx0ZGlhbG9nRWxlbWVudC5jbG9zZSgpO1xuXHRcdFxuXHRcdHRvZ2dsZU1vZGFsQXR0cmlidXRlcyhkaWFsb2dFbGVtZW50KTtcblx0XHR0b2dnbGVDbG9zZUJ1dHRvbkxpc3RlbmVyKGRpYWxvZ1N0YXRlLmNsb3NlQnV0dG9uU3RhdGUubGlzdGVuZXJBdHRhY2hlZCwgY2xvc2VCdXR0b24sIGNsb3NlRGlhbG9nKTtcblx0XHR0b2dnbGVFc2NhcGVLZXlMaXN0ZW5lcihkaWFsb2dTdGF0ZS5lc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbiwgZGlhbG9nU3RhdGUpO1xuXG5cdFx0ZGlhbG9nRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBzYW5pdGl6ZURpYWxvZyk7XG5cblx0XHR0b2dnbGVNb2RhbFN0YXRlKGRpYWxvZ1N0YXRlKTtcblx0fVxuXG5cdGNvbnN0IGNsb3NlRGlhbG9nID0gKCkgPT4ge1xuXHRcdGRpYWxvZ0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2xvc2luZycpO1xuXHRcdGRpYWxvZ0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgc2FuaXRpemVEaWFsb2cpO1xuXHR9XG5cblx0Y29uc3QgaW5zcGVjdERpYWxvZyA9ICgpID0+IHtcblx0XHRpZiAoZGlhbG9nRWxlbWVudC5vcGVuKSB0aHJvdyBuZXcgRXJyb3IoYFRoZSBmb2xsb3dpbmcgZGlhbG9nIGlzIGFscmVhZHkgb3BlbjogJHtkaWFsb2dTZWxlY3Rvcn0uYCk7XG5cdFx0aWYgKGRpYWxvZ1N0YXRlLmxpc3RlbmVyQXR0YWNoZWQpIHRocm93IG5ldyBFcnJvcihgQSBsaXN0ZW5lciBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIHRoaXMgZGlhbG9nIGVsZW1lbnQ6ICR7ZGlhbG9nU2VsZWN0b3J9LmApO1xuXHRcdGlmIChkaWFsb2dTdGF0ZS5jbG9zZUJ1dHRvblN0YXRlLmxpc3RlbmVyQXR0YWNoZWQpIHRocm93IG5ldyBFcnJvcihgQSBsaXN0ZW5lciBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIHRoZSBjbG9zZSBidXR0b24gb2YgdGhlIGRpYWxvZyBlbGVtZW50OiAke2RpYWxvZ1NlbGVjdG9yfS5gKTtcblx0fVxuXG5cdGNvbnN0IG9wZW5EaWFsb2cgPSAoKSA9PiB7XG5cdFx0Ly8g8J+UtCBjaGVja1BvaW50XG5cdFx0aW5zcGVjdERpYWxvZygpOyBcblx0XHQvLyDwn5+iIGNsZWFyZWRTdWNjZXNzZnVsbHkgIVxuXG5cdFx0ZGlhbG9nRWxlbWVudC5zaG93TW9kYWwoKTtcblx0XHRcblx0XHR0b2dnbGVNb2RhbEF0dHJpYnV0ZXMoZGlhbG9nRWxlbWVudCk7XG5cdFx0dG9nZ2xlQ2xvc2VCdXR0b25MaXN0ZW5lcihkaWFsb2dTdGF0ZS5jbG9zZUJ1dHRvblN0YXRlLmxpc3RlbmVyQXR0YWNoZWQsIGNsb3NlQnV0dG9uLCBjbG9zZURpYWxvZyk7XG5cdFx0dG9nZ2xlRXNjYXBlS2V5TGlzdGVuZXIoZGlhbG9nU3RhdGUuZXNjYXBlS2V5TGlzdGVuZXJBdHRhY2hlZCwgY2xvc2VCdXR0b24sIGRpYWxvZ1N0YXRlKTtcblx0XHRcblx0XHR0b2dnbGVNb2RhbFN0YXRlKGRpYWxvZ1N0YXRlKTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0b3BlbkRpYWxvZyxcblx0XHRjbG9zZURpYWxvZ1xuXHR9XG59XG5cbi8vIPCfkq0gZHNDcmVhdGVMaWdodGJveENvbnRyb2xsZXJcbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY29udHJvbGxlciBvYmplY3QgZm9yIG1hbmFnaW5nIGFueSBlbGVtZW50IHdpdGggbW9kYWwtbGlrZSBmdW5jdGlvbmFsaXR5LCBwcm92aWRpbmcgbWV0aG9kcyB0byAnb3BlbicgYW5kICdjbG9zZScgdGhlIGxpZ2h0Ym94LlxuICogVGhpcyBmdW5jdGlvbiBpbml0aWFsaXplcyB0aGUgbGlnaHRib3ggYXMgYSBtb2RhbCwgc2V0cyB1cCBuZWNlc3NhcnkgYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzLFxuICogYW5kIGVuc3VyZXMgdGhhdCB0aGUgbGlnaHRib3ggY2FuIGJlIHByb3Blcmx5IG1hbmFnZWQgdGhyb3VnaCBpdHMgbGlmZWN5Y2xlLlxuICogXG4gKiBJdHMgaW50ZW5kZWQgdXNlIGlzIHRvIHByb3ZpZGUgYSBzaW1wbGUgd2F5IHRvIG1hbmFnZSB0aGUgdmlzaWJpbGl0eSBvZiBhIGxpZ2h0Ym94IGVsZW1lbnQuXG4gKiBJdCBhYnN0cmFjdHMgb3V0IHRoZSBwZXNreSBhbmltYXRpbmcgaW4tYW5kLW91dCBjb251bmRydW0gb2YgbW9kYWwtbGlrZSBlbGVtZW50cyB3aXRoIGEgQ1NTIHByb3BlcnR5LCBkaXNwbGF5IG9mIG5vbmUgKHRvIGJsb2NrL2ZsZXgvZ3JpZC9ldGMuKS5cbiAqIFNlZSByZWFkbWUgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbGlnaHRib3hFbGVtZW50IC0gQW55IEhUTUwgY29udGFpbmVyIGVsZW1lbnQgKGllLiwgPGRpdj4pIHRvIGluaXRpYWxpemUgYXMgYSBtb2RhbC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IEFuIG9iamVjdCBjb250YWluaW5nIG1ldGhvZHMgdG8gbWFuYWdlIHRoZSBsaWdodGJveGVzJ3MgdmlzaWJpbGl0eSBhbmQgc3RhdGUuXG4gKiBcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgaW52YWxpZC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgbm90IGEgdmFsaWQgSFRNTCBlbGVtZW50LlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBsaWdodGJveCBpcyBhbHJlYWR5IHZpc2libGUuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgYSBsaXN0ZW5lciBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIGxpZ2h0Ym94LlxuICogQHRocm93cyB7RXJyb3J9IElmIGEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byBsaWdodGJveCdzIGNsb3NlIGJ1dHRvbi5cbiAqIFxuICogQGV4YW1wbGVcbiAqID8gQXNzdW1lICdteUxpZ2h0Ym94JyBpcyBhIERPTSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgZGlhbG9nLlxuICogY29uc3QgbGlnaHRCb3hDb250cm9sbGVyID0gZHNDcmVhdGVMaWdodGJveENvbnRyb2xsZXIobXlMaWdodGJveCk7XG4gKiBcbiAqID8gVG8gb3BlbiB0aGUgbGlnaHRib3hcbiAqIGxpZ2h0Qm94Q29udHJvbGxlci5vcGVuTGlnaHRib3goKTtcbiAqIFxuICogPyBUbyBjbG9zZSB0aGUgbGlnaHRib3hcbiAqIGxpZ2h0Qm94Q29udHJvbGxlci5jbG9zZUxpZ2h0Ym94KCk7XG4gKiBcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZHNDcmVhdGVMaWdodGJveENvbnRyb2xsZXIobGlnaHRib3hFbGVtZW50KSB7XG5cblx0ZnVuY3Rpb24gZXhhbWluZUFyZ3VtZW50T25DYWxsKCkge1xuXHRcdGlmICghbGlnaHRib3hFbGVtZW50KSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGRzQ3JlYXRlRGlhbG9nQ29udHJvbGxlciBmdW5jdGlvbi5gKTtcblx0XHRpZiAoIShsaWdodGJveEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHRocm93IG5ldyBFcnJvcihgVGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIG5vdCBhIHZhbGlkIEhUTUwgZWxlbWVudC5gKTtcblx0fVxuXG5cdC8vIPCflLQgY2hlY2tQb2ludFxuXHRleGFtaW5lQXJndW1lbnRPbkNhbGwoKTsgLy8gISBjaGVja1BvaW50XG5cdC8vIPCfn6IgY2xlYXJlZFN1Y2Nlc3NmdWxseSAhXG5cblx0aW5pdGlhbGl6ZUFzTW9kYWwobGlnaHRib3hFbGVtZW50KTtcblxuXHRjb25zdCBsaWdodEJveFNlbGVjdG9yID0gZHNHZXRTZWxlY3RvcihsaWdodGJveEVsZW1lbnQpO1xuXHRjb25zdCBjbG9zZUJ1dHRvbiA9IGxpZ2h0Ym94RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZHMtY2xvc2UtYnV0dG9uJyk7XG5cblx0ZXhhbWluZUNsb3NlQnV0dG9uKGNsb3NlQnV0dG9uLCBsaWdodEJveFNlbGVjdG9yKTtcblx0aW5pdGlhbGl6ZUNsb3NlQnV0dG9uKGNsb3NlQnV0dG9uKTtcblxuXHRsZXQgbGlnaHRib3hTdGF0ZSA9IHtcblx0XHRtb2RhbE9wZW46IGZhbHNlLFxuXHRcdGxpc3RlbmVyQXR0YWNoZWQ6IGZhbHNlLFxuXHRcdGVzY2FwZUtleUxpc3RlbmVyQXR0YWNoZWQ6IGZhbHNlLFxuXHRcdGNsb3NlQnV0dG9uU3RhdGU6IHtcblx0XHRcdGxpc3RlbmVyQXR0YWNoZWQ6IGZhbHNlLFxuXHRcdH1cblx0fTtcblxuXHRjb25zdCBjbGVhbkxpZ2h0Qm94ID0gKCkgPT4ge1xuXHRcdGxpZ2h0Ym94RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjbG9zaW5nJyk7XG5cdFx0bGlnaHRib3hFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcblxuXHRcdHRvZ2dsZU1vZGFsQXR0cmlidXRlcyhsaWdodGJveEVsZW1lbnQpO1xuXHRcdHRvZ2dsZUNsb3NlQnV0dG9uTGlzdGVuZXIobGlnaHRib3hTdGF0ZS5jbG9zZUJ1dHRvblN0YXRlLmxpc3RlbmVyQXR0YWNoZWQsIGNsb3NlQnV0dG9uLCBjbG9zZUxpZ2h0Ym94KTtcblx0XHR0b2dnbGVFc2NhcGVLZXlMaXN0ZW5lcihsaWdodGJveFN0YXRlLmVzY2FwZUtleUxpc3RlbmVyQXR0YWNoZWQsIGNsb3NlQnV0dG9uLCBsaWdodGJveFN0YXRlKTtcblxuXHRcdGxpZ2h0Ym94RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBjbGVhbkxpZ2h0Qm94KTtcblxuXHRcdHRvZ2dsZU1vZGFsU3RhdGUobGlnaHRib3hTdGF0ZSk7XG5cdH1cblxuXHRjb25zdCBjbG9zZUxpZ2h0Ym94ID0gKCkgPT4ge1xuXHRcdGxpZ2h0Ym94RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjbG9zaW5nJyk7XG5cdFx0bGlnaHRib3hFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGNsZWFuTGlnaHRCb3gpO1xuXHR9XG5cblx0Y29uc3QgaW5zcGVjdExpZ2h0Ym94ID0gKCkgPT4ge1xuXHRcdGlmIChsaWdodGJveEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJykpIHRocm93IG5ldyBFcnJvcihgVGhlIGZvbGxvd2luZyBsaWdodGJveCBpcyBhbHJlYWR5IHZpc2libGU6ICR7bGlnaHRCb3hTZWxlY3Rvcn0uYCk7XG5cdFx0aWYgKGxpZ2h0Ym94U3RhdGUubGlzdGVuZXJBdHRhY2hlZCkgdGhyb3cgbmV3IEVycm9yKGBBIGxpc3RlbmVyIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhlIGxpZ2h0Ym94IGVsZW1lbnQ6ICR7bGlnaHRCb3hTZWxlY3Rvcn0uYCk7XG5cdFx0aWYgKGxpZ2h0Ym94U3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkKSB0aHJvdyBuZXcgRXJyb3IoYEEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byB0aGUgY2xvc2UgYnV0dG9uIG9mIHRoZSBsaWdodGJveDogJHtsaWdodEJveFNlbGVjdG9yfS5gKTtcblx0fVxuXG5cdGNvbnN0IG9wZW5MaWdodGJveCA9ICgpID0+IHtcblx0XHQvLyDwn5S0IGNoZWNrUG9pbnRcblx0XHRpbnNwZWN0TGlnaHRib3goKTtcblx0XHQvLyDwn5+iIGNsZWFyZWRTdWNjZXNzZnVsbHkgIVxuXHRcdFxuXHRcdGxpZ2h0Ym94RWxlbWVudC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG5cblx0XHR0b2dnbGVNb2RhbEF0dHJpYnV0ZXMobGlnaHRib3hFbGVtZW50KTtcblx0XHR0b2dnbGVDbG9zZUJ1dHRvbkxpc3RlbmVyKGxpZ2h0Ym94U3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbiwgY2xvc2VMaWdodGJveCk7XG5cdFx0dG9nZ2xlRXNjYXBlS2V5TGlzdGVuZXIobGlnaHRib3hTdGF0ZS5lc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbiwgbGlnaHRib3hTdGF0ZSk7XG5cblx0XHR0b2dnbGVNb2RhbFN0YXRlKGxpZ2h0Ym94U3RhdGUpO1xuXHR9XG5cblx0cmV0dXJuIHtcblx0XHRvcGVuTGlnaHRib3gsXG5cdFx0Y2xvc2VMaWdodGJveFxuXHR9XG59XG5cbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gPyBGdW4gZmFjdDogXG4vLyA/IExpZ2h0Ym94ZXMgYXJlIG5hbWVkIGFmdGVyIHRoZSBsaWdodGJveCB0aGF0IHBob3RvZ3JhcGhlcnMgdXNlIHRvIHZpZXcgc2xpZGVzLiBcbi8vID8gT2vigKYgbWF5YmUgaXQncyBub3QgdGhhdCBmdW4uIiwiaW1wb3J0IHsgY3JlYXRlU3BsaXRUZXh0RnJhZ21lbnQgfSBmcm9tIFwiLi9zcGxpdC10ZXh0XCI7XG5cbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZnVuY3Rpb24gcmFuZG9taXplQ2hhcmFjdGVyTG9jYXRpb25zKG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzKSB7XG4gIG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzLmZvckVhY2goY2hhcmFjdGVyID0+IHtcbiAgICBjb25zdCByYW5kb21OdW1iZXIgPSBNYXRoLnJhbmRvbSgpO1xuXG4gICAgaWYgKHJhbmRvbU51bWJlciA+PSAwICYmIHJhbmRvbU51bWJlciA8IDAuMjUpIHtcbiAgICAgIGNoYXJhY3Rlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzMzKX1weCwgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMzMpfXB4KWA7XG4gICAgfSBlbHNlIGlmIChyYW5kb21OdW1iZXIgPj0gMC4yNSAmJiByYW5kb21OdW1iZXIgPCAwLjUpIHtcbiAgICAgIGNoYXJhY3Rlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogLTMzMyl9cHgsICR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogLTMzMyl9cHgpYDtcbiAgICB9IGVsc2UgaWYgKHJhbmRvbU51bWJlciA+PSAwLjUgJiYgcmFuZG9tTnVtYmVyIDwgMC43NSkge1xuICAgICAgY2hhcmFjdGVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMzMpfXB4LCAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIC0zMzMpfXB4KWA7XG4gICAgfSBlbHNlIHsgLy8gPyByYW5kb21OdW1iZXIgPD0gMC4yNVxuICAgICAgY2hhcmFjdGVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAtMzMzKX1weCwgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMzMpfXB4KWA7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE1vZGFsTGlzdGVuZXJzKCkge1xuICBjb25zdCBhZGRMaXN0ZW5lckZvck1vZGFsT3BlbiA9IChub25XaGl0ZXNwYWNlQ2hhcmFjdGVycykgPT4ge1xuICAgIGNvbnN0IG9wZW5Nb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcGVuLW1vZGFsLWJ1dHRvbicpO1xuXG4gICAgb3Blbk1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMuZm9yRWFjaChub25XaGl0ZXNwYWNlQ2hhcmFjdGVyID0+IG5vbldoaXRlc3BhY2VDaGFyYWN0ZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgwLCAwKScpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGFkZExpc3RlbmVyRm9yTW9kYWxDbG9zZSA9IChub25XaGl0ZXNwYWNlQ2hhcmFjdGVycykgPT4ge1xuICAgIGNvbnN0IGNsb3NlTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHMtY2xvc2UtYnV0dG9uJyk7XG5cbiAgICBjbG9zZU1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgcmFuZG9taXplQ2hhcmFjdGVyTG9jYXRpb25zKG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXJhY3Rlci5ub24td2hpdGVzcGFjZScpO1xuICBhZGRMaXN0ZW5lckZvck1vZGFsT3Blbihub25XaGl0ZXNwYWNlQ2hhcmFjdGVycyk7XG4gIGFkZExpc3RlbmVyRm9yTW9kYWxDbG9zZShub25XaGl0ZXNwYWNlQ2hhcmFjdGVycyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplTW9kYWxDb250ZW50KCkge1xuICBjb25zdCBnZXRTcGxpdEVsZW1lbnRGcmFnbWVudCA9IChlbGVtZW50VG9TcGxpdCwgZWxlbWVudFRvQXBwZW5kRnJhZ21lbnQsIGlkZW50aWZpZXJGb3JFYWNoU3BsaXRFbGVtZW50KSA9PiB7XG4gICAgZWxlbWVudFRvQXBwZW5kRnJhZ21lbnQuYXBwZW5kQ2hpbGQoY3JlYXRlU3BsaXRUZXh0RnJhZ21lbnQoZWxlbWVudFRvU3BsaXQsIGlkZW50aWZpZXJGb3JFYWNoU3BsaXRFbGVtZW50KSk7XG5cbiAgICByZXR1cm4gZWxlbWVudFRvQXBwZW5kRnJhZ21lbnQ7XG4gIH07XG5cbiAgY29uc3QgaWRlbnRpZnlOb25XaGl0ZXNwYWNlQ2hhcmFjdGVycyA9IChzcGxpdFRleHQpID0+IHtcbiAgICBjb25zdCBub25XaGl0ZXNwYWNlQ2hhcmFjdGVycyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxpdFRleHQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gc3BsaXRUZXh0LmNoaWxkcmVuW2ldO1xuICAgICAgaWYgKGNoaWxkLnRleHRDb250ZW50LnRyaW0oKSAhPT0gJycpIG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzLnB1c2goY2hpbGQpO1xuICAgIH1cblxuICAgIG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzLmZvckVhY2goY2hhcmFjdGVyID0+IGNoYXJhY3Rlci5jbGFzc0xpc3QuYWRkKCdub24td2hpdGVzcGFjZScpKTtcblxuICAgIHJldHVybiBub25XaGl0ZXNwYWNlQ2hhcmFjdGVycztcbiAgfTtcblxuICBjb25zdCByZXBsYWNlRWxlbWVudCA9IChjb250YWluZXIsIG5ld0VsZW1lbnQsIG9sZEVsZW1lbnQpID0+IHtcbiAgICBjb250YWluZXIucmVwbGFjZUNoaWxkKG5ld0VsZW1lbnQsIG9sZEVsZW1lbnQpO1xuICB9XG5cbiAgY29uc3QgcHJlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2MtY29udGFpbmVyJyk7XG4gIGNvbnN0IHByZSA9IHByZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdwcmUnKTtcblxuICBjb25zdCBuZXdQcmUgPSBnZXRTcGxpdEVsZW1lbnRGcmFnbWVudChwcmUsIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ByZScpLCAnY2hhcmFjdGVyJyk7XG4gIHJlcGxhY2VFbGVtZW50KHByZUNvbnRhaW5lciwgbmV3UHJlLCBwcmUpO1xuXG4gIHJhbmRvbWl6ZUNoYXJhY3RlckxvY2F0aW9ucyhpZGVudGlmeU5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzKG5ld1ByZSkpO1xufSIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGxpdFRleHRGcmFnbWVudChlbGVtZW50LCBpZCkge1xuICBjb25zdCBnZXROb25XaGl0ZXNwYWNlQ2hhcmFjdGVycyA9IChlbGVtZW50KSA9PiB7XG5cbiAgICBcbiAgfTtcblxuICBjb25zdCBzcGxpdFRleHRGcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgY29uc3QgdGV4dCA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG5cbiAgdGV4dC5zcGxpdCgnJykuZm9yRWFjaCgoY2hhcmFjdGVyLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGNoYXJhY3RlclNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgY2hhcmFjdGVyU3Bhbi5zZXRBdHRyaWJ1dGUoJ2lkJywgYCR7aWR9LSR7aW5kZXggKyAxfWApO1xuICAgIGNoYXJhY3RlclNwYW4uY2xhc3NMaXN0LmFkZCgnY2hhcmFjdGVyJyk7XG5cbiAgICAvLyBVc2UgYSBub24tYnJlYWtpbmcgc3BhY2UgZm9yIHNwYWNlcyB0byBlbnN1cmUgdGhleSBhcmUgcHJlc2VydmVkXG4gICAgY2hhcmFjdGVyU3Bhbi50ZXh0Q29udGVudCA9IGNoYXJhY3RlciA9PT0gJyAnID8gJ1xcdTAwQTAnIDogY2hhcmFjdGVyO1xuXG4gICAgc3BsaXRUZXh0RnJhZ21lbnQuYXBwZW5kQ2hpbGQoY2hhcmFjdGVyU3Bhbik7XG4gIH0pO1xuXG4gIHJldHVybiBzcGxpdFRleHRGcmFnbWVudDtcbn0iLCJpbXBvcnQgeyBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIgfSBmcm9tIFwiLi9kaXNwbGF5LXN0dWZmLXVpXCI7XG5cbmltcG9ydCB7IGluaXRpYWxpemVNb2RhbENvbnRlbnQsIGFkZE1vZGFsTGlzdGVuZXJzIH0gZnJvbSAnLi9mbHVmZic7IFxuaW1wb3J0ICcuL3Nhc3MvbWFpbi5zY3NzJztcblxuZnVuY3Rpb24gaW5pdEFwcCgpIHtcbiAgaW5pdGlhbGl6ZU1vZGFsQ29udGVudCgpO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGFkZE1vZGFsTGlzdGVuZXJzKTtcbn07XG5cbmluaXRBcHAoKTtcblxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyA/IGRpc3BsYXlTdHVmZi5qc1xuLy8gPyA8ZGlhbG9nPiBkZW1vOlxuXG5jb25zdCBkaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaWFsb2cnKTtcbmNvbnN0IGRpYWxvZ0NvbnRyb2xsZXIgPSBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIoZGlhbG9nKTtcblxuY29uc3Qgb3Blbk1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wZW4tbW9kYWwtYnV0dG9uJyk7XG5cbm9wZW5Nb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZGlhbG9nQ29udHJvbGxlci5vcGVuRGlhbG9nKCk7XG59KTsiXSwibmFtZXMiOlsidG9nZ2xlRXNjYXBlS2V5TGlzdGVuZXIiLCJpc0xpc3RlbmVyQXR0YWNoZWQiLCJjbG9zZUJ1dHRvbiIsImRpYWxvZ09yTGlnaHRCb3hTdGF0ZSIsIm1vZGlmaWVkRXNjYXBlS2V5Q2FsbGJhY2siLCJldmVudCIsImtleSIsIm9wZW4iLCJwcmV2ZW50RGVmYXVsdCIsImNsaWNrIiwid2luZG93IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0b2dnbGVDbG9zZUJ1dHRvbkxpc3RlbmVyIiwiY2xvc2VNb2RhbENhbGxiYWNrIiwidG9nZ2xlTW9kYWxTdGF0ZSIsIm1vZGFsU3RhdGUiLCJFcnJvciIsImxpc3RlbmVyQXR0YWNoZWQiLCJlc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkIiwiY2xvc2VCdXR0b25TdGF0ZSIsInRvZ2dsZU1vZGFsQXR0cmlidXRlcyIsIm1vZGFsRWxlbWVudCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInJhbmRvbWl6ZUNoYXJhY3RlckxvY2F0aW9ucyIsIm5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzIiwiZm9yRWFjaCIsImNoYXJhY3RlciIsInJhbmRvbU51bWJlciIsIk1hdGgiLCJyYW5kb20iLCJzdHlsZSIsInRyYW5zZm9ybSIsImNvbmNhdCIsImZsb29yIiwiZWxlbWVudFRvU3BsaXQiLCJlbGVtZW50VG9BcHBlbmRGcmFnbWVudCIsImVsZW1lbnQiLCJzcGxpdFRleHRGcmFnbWVudCIsIm5ld0VsZW1lbnQiLCJvbGRFbGVtZW50IiwicHJlQ29udGFpbmVyIiwicHJlIiwibmV3UHJlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInRleHRDb250ZW50Iiwic3BsaXQiLCJpbmRleCIsImNoYXJhY3RlclNwYW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZXBsYWNlQ2hpbGQiLCJzcGxpdFRleHQiLCJpIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJjaGlsZCIsInRyaW0iLCJwdXNoIiwiaWRlbnRpZnlOb25XaGl0ZXNwYWNlQ2hhcmFjdGVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJub25XaGl0ZXNwYWNlQ2hhcmFjdGVyIiwiYWRkTGlzdGVuZXJGb3JNb2RhbE9wZW4iLCJhZGRMaXN0ZW5lckZvck1vZGFsQ2xvc2UiLCJkaWFsb2dDb250cm9sbGVyIiwiZGlhbG9nRWxlbWVudCIsIkhUTUxFbGVtZW50IiwidGFnTmFtZSIsImV4YW1pbmVBcmd1bWVudE9uQ2FsbCIsImRpYWxvZ1NlbGVjdG9yIiwiaWQiLCJjbGFzc05hbWUiLCJqb2luIiwiZHNHZXRTZWxlY3RvciIsInNlbGVjdG9yIiwiZXhhbWluZUNsb3NlQnV0dG9uIiwiaW5pdGlhbGl6ZUNsb3NlQnV0dG9uIiwiZGlhbG9nU3RhdGUiLCJzYW5pdGl6ZURpYWxvZyIsInJlbW92ZSIsImNsb3NlIiwiY2xvc2VEaWFsb2ciLCJvcGVuRGlhbG9nIiwiaW5zcGVjdERpYWxvZyIsInNob3dNb2RhbCIsImRzQ3JlYXRlRGlhbG9nQ29udHJvbGxlciJdLCJzb3VyY2VSb290IjoiIn0=