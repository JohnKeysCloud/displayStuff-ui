(()=>{"use strict";function t(t,e){var n=function(t){"Escape"===t.key&&modalState.open&&(t.preventDefault(),e.click())};t?window.removeEventListener("keydown",n):window.addEventListener("keydown",n)}function e(t,e,n){t?e.removeEventListener("click",n):e.addEventListener("click",n)}function n(t){if(!t)throw new Error("Invalid modal state object passed to toggleModalState function.");t.open=!t.open,t.listenerAttached=!t.listenerAttached,t.escapeKeyListenerAttached=!t.escapeKeyListenerAttached,t.closeButtonState.listenerAttached=!t.closeButtonState.listenerAttached}function o(t){"true"===t.getAttribute("aria-hidden")?(t.setAttribute("aria-hidden","false"),t.setAttribute("aria-modal","true")):(t.setAttribute("aria-hidden","true"),t.setAttribute("aria-modal","false"))}function a(t){t.forEach((function(t){var e=Math.random();t.style.transform=e>=0&&e<.25?"translate(".concat(Math.floor(333*Math.random()),"px, ").concat(Math.floor(333*Math.random()),"px)"):e>=.25&&e<.5?"translate(".concat(Math.floor(-333*Math.random()),"px, ").concat(Math.floor(-333*Math.random()),"px)"):e>=.5&&e<.75?"translate(".concat(Math.floor(333*Math.random()),"px, ").concat(Math.floor(-333*Math.random()),"px)"):"translate(".concat(Math.floor(-333*Math.random()),"px, ").concat(Math.floor(333*Math.random()),"px)")}))}var r,c,i,l,s,d,u,h,f;u=document.querySelector("#c-container"),h=u.querySelector("pre"),r=h,(c=document.createElement("pre")).appendChild((i=r,l=document.createDocumentFragment(),i.textContent.split("").forEach((function(t,e){var n=document.createElement("span");n.setAttribute("id","".concat("character","-").concat(e+1)),n.classList.add("character"),n.textContent=" "===t?" ":t,l.appendChild(n)})),l)),s=f=c,d=h,u.replaceChild(s,d),a(function(t){for(var e=[],n=0;n<t.children.length;n++){var o=t.children[n];""!==o.textContent.trim()&&e.push(o)}return e.forEach((function(t){return t.classList.add("non-whitespace")})),e}(f)),window.addEventListener("load",(function(){var t=document.querySelectorAll(".character.non-whitespace");!function(t){document.querySelector("#open-modal-button").addEventListener("click",(function(){t.forEach((function(t){return t.style.transform="translate(0, 0)"}))}))}(t),function(t){document.querySelector(".ds-close-button").addEventListener("click",(function(){a(t)}))}(t)}));var m=function(a){var r;!function(t){if(!t)throw new Error("Invalid argument passed to dsCreateDialogController function.");if(!(t instanceof HTMLElement))throw new Error("The provided argument is not a valid HTML element.");if("DIALOG"!==t.tagName)throw new Error("The element you passed in is not a dialog element.")}(a),(r=a).setAttribute("aria-modal","false"),r.setAttribute("aria-hidden","true");var c=function(t){return t.id?"#".concat(t.id):t.className?".".concat(t.className.split(" ").join(".")):"specified element"}(a),i=a.querySelector(".ds-close-button");(function(t,e){if(!t)throw new Error("Close button not found for the modal element: ".concat(e,"… Double check to ensure it has a class of '.ds-close-button'."));if("BUTTON"!==t.tagName)throw new Error("The close button for the modal element: ".concat(e," is not a button element."))})(i,c),function(t){t.setAttribute("aria-label","Close Dialog")}(i);var l={open:!1,listenerAttached:!1,escapeKeyListenerAttached:!1,closeButtonState:{listenerAttached:!1}},s=function r(){a.classList.remove("closing"),a.close(),o(a),e(l.closeButtonState.listenerAttached,i,d),t(l.escapeKeyListenerAttached,i),a.removeEventListener("animationend",r),n(l)},d=function(){a.classList.add("closing"),a.addEventListener("animationend",s)};return{openDialog:function(){!function(){if(a.open)throw new Error("The following dialog is already open: ".concat(c,"."));if(l.listenerAttached)throw new Error("A listener is already attached to this dialog element: ".concat(c,"."));if(l.closeButtonState.listenerAttached)throw new Error("A listener is already attached to the close button of the dialog element: ".concat(c,"."))}(),a.showModal(),o(a),e(l.closeButtonState.listenerAttached,i,d),t(l.escapeKeyListenerAttached,i),n(l)},closeDialog:d}}(document.querySelector("dialog"));document.querySelector("#open-modal-button").addEventListener("click",(function(){m.openDialog()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0JmLEVBQWFtRixHQUN0RnJGLEVBQXdCaUYsRUFBWS9ELDBCQUEyQmhCLEdBRS9EYSxFQUFpQmtFLEVBQ2xCLEVBSUNJLFlBQUFBLEVBRUYsQ0czSnlCSSxDQURWN0MsU0FBU0MsY0FBYyxXQUdkRCxTQUFTQyxjQUFjLHNCQUUvQmpDLGlCQUFpQixTQUFTLFdBQ3hDd0QsRUFBaUJrQixZQUNuQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGlzcGxheS1zdHVmZi11aS8uL3NyYy9kaXNwbGF5U3R1ZmYuanMiLCJ3ZWJwYWNrOi8vZGlzcGxheS1zdHVmZi11aS8uL3NyYy9mbHVmZi5qcyIsIndlYnBhY2s6Ly9kaXNwbGF5LXN0dWZmLXVpLy4vc3JjL3NwbGl0LXRleHQuanMiLCJ3ZWJwYWNrOi8vZGlzcGxheS1zdHVmZi11aS8uL3NyYy9hcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g8J+SrSBCb3RoIFN0dWZmXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIGRzR2V0U2VsZWN0b3IoZWxlbWVudCkge1xuXHRyZXR1cm4gZWxlbWVudC5pZCA/IGAjJHtlbGVtZW50LmlkfWAgOiBlbGVtZW50LmNsYXNzTmFtZSA/IGAuJHtlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJy4nKX1gIDogJ3NwZWNpZmllZCBlbGVtZW50Jztcbn1cblxuLy8g8J+SrSBjbG9zZUJ1dHRvblN0dWZmXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIGluaXRpYWxpemVDbG9zZUJ1dHRvbihjbG9zZUJ1dHRvbikge1xuXHRjbG9zZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnQ2xvc2UgRGlhbG9nJyk7XG59XG5cbmZ1bmN0aW9uIGV4YW1pbmVDbG9zZUJ1dHRvbihjbG9zZUJ1dHRvbiwgc2VsZWN0b3IpIHtcblx0aWYgKCFjbG9zZUJ1dHRvbikgdGhyb3cgbmV3IEVycm9yKGBDbG9zZSBidXR0b24gbm90IGZvdW5kIGZvciB0aGUgbW9kYWwgZWxlbWVudDogJHtzZWxlY3Rvcn3igKYgRG91YmxlIGNoZWNrIHRvIGVuc3VyZSBpdCBoYXMgYSBjbGFzcyBvZiAnLmRzLWNsb3NlLWJ1dHRvbicuYCk7XG5cdGlmIChjbG9zZUJ1dHRvbi50YWdOYW1lICE9PSAnQlVUVE9OJykgdGhyb3cgbmV3IEVycm9yKGBUaGUgY2xvc2UgYnV0dG9uIGZvciB0aGUgbW9kYWwgZWxlbWVudDogJHtzZWxlY3Rvcn0gaXMgbm90IGEgYnV0dG9uIGVsZW1lbnQuYCk7XG59XG5cbi8vIPCfkq0gbW9kYWxTdHVmZlxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiB0b2dnbGVFc2NhcGVLZXlMaXN0ZW5lcihpc0xpc3RlbmVyQXR0YWNoZWQsIGNsb3NlQnV0dG9uKSB7XG5cdGNvbnN0IG1vZGlmaWVkRXNjYXBlS2V5Q2FsbGJhY2sgPSAoZXZlbnQpID0+IHtcblx0XHRpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJyAmJiBtb2RhbFN0YXRlLm9wZW4pIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRjbG9zZUJ1dHRvbi5jbGljaygpO1xuXHRcdH1cblx0fTtcblxuXHQoaXNMaXN0ZW5lckF0dGFjaGVkKSBcblx0XHQ/XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG1vZGlmaWVkRXNjYXBlS2V5Q2FsbGJhY2spXG5cdFx0OiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG1vZGlmaWVkRXNjYXBlS2V5Q2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVDbG9zZUJ1dHRvbkxpc3RlbmVyKGlzTGlzdGVuZXJBdHRhY2hlZCwgY2xvc2VCdXR0b24sIGNsb3NlTW9kYWxDYWxsYmFjaykge1xuXHQoaXNMaXN0ZW5lckF0dGFjaGVkKSBcblx0XHQ/IGNsb3NlQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbENhbGxiYWNrKVxuXHRcdDogY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU1vZGFsQ2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVNb2RhbFN0YXRlKG1vZGFsU3RhdGUpIHtcblx0aWYgKCFtb2RhbFN0YXRlKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbW9kYWwgc3RhdGUgb2JqZWN0IHBhc3NlZCB0byB0b2dnbGVNb2RhbFN0YXRlIGZ1bmN0aW9uLmApO1xuXG5cdG1vZGFsU3RhdGUub3BlbiA9ICFtb2RhbFN0YXRlLm9wZW47XG5cdG1vZGFsU3RhdGUubGlzdGVuZXJBdHRhY2hlZCA9ICFtb2RhbFN0YXRlLmxpc3RlbmVyQXR0YWNoZWQ7XG5cdG1vZGFsU3RhdGUuZXNjYXBlS2V5TGlzdGVuZXJBdHRhY2hlZCA9ICFtb2RhbFN0YXRlLmVzY2FwZUtleUxpc3RlbmVyQXR0YWNoZWQ7XG5cdG1vZGFsU3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkID0gIW1vZGFsU3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVNb2RhbEF0dHJpYnV0ZXMobW9kYWxFbGVtZW50KSB7XG5cdGNvbnN0IG1vZGFsT3BlbiA9IG1vZGFsRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJykgPT09ICd0cnVlJztcblxuXHRpZiAobW9kYWxPcGVuKSB7XG5cdFx0bW9kYWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcblx0XHRtb2RhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLW1vZGFsJywgJ3RydWUnKTtcblx0fSBlbHNlIHtcblx0XHRtb2RhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG5cdFx0bW9kYWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICdmYWxzZScpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVBc01vZGFsKG1vZGFsRWxlbWVudCkge1xuXHRtb2RhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLW1vZGFsJywgJ2ZhbHNlJyk7XG5cdG1vZGFsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbn1cblxuLy8gPj4+IGV4cG9ydHNcbi8vID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4vLyDwn5KtIGRzQ3JlYXRlRGlhbG9nQ29udHJvbGxlclxuLy8g8J+SrSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjb250cm9sbGVyIG9iamVjdCBmb3IgbWFuYWdpbmcgYSBkaWFsb2cgZWxlbWVudCwgcHJvdmlkaW5nIG1ldGhvZHMgdG8gb3BlbiBhbmQgY2xvc2UgdGhlIGRpYWxvZy5cbiAqIFRoaXMgZnVuY3Rpb24gaW5pdGlhbGl6ZXMgdGhlIGRpYWxvZyBhcyBhIG1vZGFsLCBzZXRzIHVwIG5lY2Vzc2FyeSBhY2Nlc3NpYmlsaXR5IGF0dHJpYnV0ZXMsXG4gKiBhbmQgZW5zdXJlcyB0aGF0IHRoZSBkaWFsb2cgY2FuIGJlIHByb3Blcmx5IG1hbmFnZWQgdGhyb3VnaCBpdHMgbGlmZWN5Y2xlLlxuICpcbiAqIEl0cyBpbnRlbmRlZCB1c2UgaXMgdG8gcHJvdmlkZSBhIHNpbXBsZSB3YXkgdG8gbWFuYWdlIHRoZSB2aXNpYmlsaXR5IG9mIGEgZGlhbG9nIGVsZW1lbnQuXG4gKiBJdCBhYnN0cmFjdHMgb3V0IHRoZSBwZXNreSBhbmltYXRpbmcgaW4tYW5kLW91dCBjb251bmRydW0gb2YgbW9kYWwgZWxlbWVudHMgd2l0aCBhIENTUyBwcm9wZXJ0eSwgZGlzcGxheSBvZiBub25lICh0byBibG9jay9mbGV4L2dyaWQvZXRjLikuXG4gKiBTZWUgcmVhZG1lIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICogXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBkaWFsb2dFbGVtZW50IC0gVGhlIEhUTUwgZGlhbG9nIGVsZW1lbnQgdG8gaW5pdGlhbGl6ZSBhcyBhIG1vZGFsLlxuICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgbWV0aG9kcyB0byBtYW5hZ2UgdGhlIGRpYWxvZydzIHZpc2liaWxpdHkgYW5kIHN0YXRlLlxuICogXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIGludmFsaWQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIG5vdCBhIHZhbGlkIEhUTUwgZWxlbWVudC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgbm90IGEgdmFsaWQgSFRNTCA8ZGlhbG9nPiBlbGVtZW50LlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBkaWFsb2cgaXMgYWxyZWFkeSB2aXNpYmxlLlxuICogQHRocm93cyB7RXJyb3J9IElmIGEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byBkaWFsb2cuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgYSBsaXN0ZW5lciBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIGRpYWxvZydzIGNsb3NlIGJ1dHRvbi5cbiAqIFxuICogQGV4YW1wbGVcbiAqID8gQXNzdW1lICdteURpYWxvZycgaXMgYSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGRpYWxvZy5cbiAqIGNvbnN0IGRpYWxvZ0NvbnRyb2xsZXIgPSBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIobXlEaWFsb2cpO1xuICogXG4gKiA/IFRvIG9wZW4gdGhlIGRpYWxvZ1xuICogZGlhbG9nQ29udHJvbGxlci5vcGVuRGlhbG9nKCk7XG4gKiBcbiAqID8gVG8gY2xvc2UgdGhlIGRpYWxvZ1xuICogZGlhbG9nQ29udHJvbGxlci5jbG9zZURpYWxvZygpO1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIoZGlhbG9nRWxlbWVudCkge1xuXG5cdGZ1bmN0aW9uIGV4YW1pbmVBcmd1bWVudE9uQ2FsbChkaWFsb2dFbGVtZW50KSB7XG5cdFx0aWYgKCFkaWFsb2dFbGVtZW50KSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGRzQ3JlYXRlRGlhbG9nQ29udHJvbGxlciBmdW5jdGlvbi5gKTtcblx0XHRpZiAoIShkaWFsb2dFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBub3QgYSB2YWxpZCBIVE1MIGVsZW1lbnQuYCk7XG5cdFx0aWYgKGRpYWxvZ0VsZW1lbnQudGFnTmFtZSAhPT0gJ0RJQUxPRycpIHRocm93IG5ldyBFcnJvcihgVGhlIGVsZW1lbnQgeW91IHBhc3NlZCBpbiBpcyBub3QgYSBkaWFsb2cgZWxlbWVudC5gKTtcblx0fVxuXG5cdC8vIPCflLQgY2hlY2tQb2ludFxuXHRleGFtaW5lQXJndW1lbnRPbkNhbGwoZGlhbG9nRWxlbWVudCk7IFxuXHQvLyDwn5+iIGNsZWFyZWRTdWNjZXNzZnVsbHkgIVxuXG5cdGluaXRpYWxpemVBc01vZGFsKGRpYWxvZ0VsZW1lbnQpOyBcblxuXHRjb25zdCBkaWFsb2dTZWxlY3RvciA9IGRzR2V0U2VsZWN0b3IoZGlhbG9nRWxlbWVudCk7XG5cdGNvbnN0IGNsb3NlQnV0dG9uID0gZGlhbG9nRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZHMtY2xvc2UtYnV0dG9uJyk7XG5cblx0ZXhhbWluZUNsb3NlQnV0dG9uKGNsb3NlQnV0dG9uLCBkaWFsb2dTZWxlY3Rvcik7XG5cdGluaXRpYWxpemVDbG9zZUJ1dHRvbihjbG9zZUJ1dHRvbik7XG5cblx0bGV0IGRpYWxvZ1N0YXRlID0ge1xuXHRcdG9wZW46IGZhbHNlLFxuXHRcdGxpc3RlbmVyQXR0YWNoZWQ6IGZhbHNlLFxuXHRcdGVzY2FwZUtleUxpc3RlbmVyQXR0YWNoZWQ6IGZhbHNlLFxuXHRcdGNsb3NlQnV0dG9uU3RhdGU6IHtcblx0XHRcdGxpc3RlbmVyQXR0YWNoZWQ6IGZhbHNlLFxuXHRcdH1cblx0fTtcblxuXHRjb25zdCBzYW5pdGl6ZURpYWxvZyA9ICgpID0+IHtcblx0XHRkaWFsb2dFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Nsb3NpbmcnKTtcblx0XHRkaWFsb2dFbGVtZW50LmNsb3NlKCk7XG5cdFx0XG5cdFx0dG9nZ2xlTW9kYWxBdHRyaWJ1dGVzKGRpYWxvZ0VsZW1lbnQpO1xuXHRcdHRvZ2dsZUNsb3NlQnV0dG9uTGlzdGVuZXIoZGlhbG9nU3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbiwgY2xvc2VEaWFsb2cpO1xuXHRcdHRvZ2dsZUVzY2FwZUtleUxpc3RlbmVyKGRpYWxvZ1N0YXRlLmVzY2FwZUtleUxpc3RlbmVyQXR0YWNoZWQsIGNsb3NlQnV0dG9uKTtcblxuXHRcdGRpYWxvZ0VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgc2FuaXRpemVEaWFsb2cpO1xuXG5cdFx0dG9nZ2xlTW9kYWxTdGF0ZShkaWFsb2dTdGF0ZSk7XG5cdH1cblxuXHRjb25zdCBjbG9zZURpYWxvZyA9ICgpID0+IHtcblx0XHRkaWFsb2dFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Nsb3NpbmcnKTtcblx0XHRkaWFsb2dFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIHNhbml0aXplRGlhbG9nKTtcblx0fVxuXG5cdGNvbnN0IGluc3BlY3REaWFsb2cgPSAoKSA9PiB7XG5cdFx0aWYgKGRpYWxvZ0VsZW1lbnQub3BlbikgdGhyb3cgbmV3IEVycm9yKGBUaGUgZm9sbG93aW5nIGRpYWxvZyBpcyBhbHJlYWR5IG9wZW46ICR7ZGlhbG9nU2VsZWN0b3J9LmApO1xuXHRcdGlmIChkaWFsb2dTdGF0ZS5saXN0ZW5lckF0dGFjaGVkKSB0aHJvdyBuZXcgRXJyb3IoYEEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byB0aGlzIGRpYWxvZyBlbGVtZW50OiAke2RpYWxvZ1NlbGVjdG9yfS5gKTtcblx0XHRpZiAoZGlhbG9nU3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkKSB0aHJvdyBuZXcgRXJyb3IoYEEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byB0aGUgY2xvc2UgYnV0dG9uIG9mIHRoZSBkaWFsb2cgZWxlbWVudDogJHtkaWFsb2dTZWxlY3Rvcn0uYCk7XG5cdH1cblxuXHRjb25zdCBvcGVuRGlhbG9nID0gKCkgPT4ge1xuXHRcdC8vIPCflLQgY2hlY2tQb2ludFxuXHRcdGluc3BlY3REaWFsb2coKTsgXG5cdFx0Ly8g8J+foiBjbGVhcmVkU3VjY2Vzc2Z1bGx5ICFcblxuXHRcdGRpYWxvZ0VsZW1lbnQuc2hvd01vZGFsKCk7XG5cdFx0XG5cdFx0dG9nZ2xlTW9kYWxBdHRyaWJ1dGVzKGRpYWxvZ0VsZW1lbnQpO1xuXHRcdHRvZ2dsZUNsb3NlQnV0dG9uTGlzdGVuZXIoZGlhbG9nU3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbiwgY2xvc2VEaWFsb2cpO1xuXHRcdHRvZ2dsZUVzY2FwZUtleUxpc3RlbmVyKGRpYWxvZ1N0YXRlLmVzY2FwZUtleUxpc3RlbmVyQXR0YWNoZWQsIGNsb3NlQnV0dG9uKTtcblx0XHRcblx0XHR0b2dnbGVNb2RhbFN0YXRlKGRpYWxvZ1N0YXRlKTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0b3BlbkRpYWxvZyxcblx0XHRjbG9zZURpYWxvZ1xuXHR9XG59XG5cbi8vIPCfkq0gZHNDcmVhdGVMaWdodGJveENvbnRyb2xsZXJcbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY29udHJvbGxlciBvYmplY3QgZm9yIG1hbmFnaW5nIGFueSBlbGVtZW50IHdpdGggbW9kYWwtbGlrZSBmdW5jdGlvbmFsaXR5LCBwcm92aWRpbmcgbWV0aG9kcyB0byAnb3BlbicgYW5kICdjbG9zZScgdGhlIGxpZ2h0Ym94LlxuICogVGhpcyBmdW5jdGlvbiBpbml0aWFsaXplcyB0aGUgbGlnaHRib3ggYXMgYSBtb2RhbCwgc2V0cyB1cCBuZWNlc3NhcnkgYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzLFxuICogYW5kIGVuc3VyZXMgdGhhdCB0aGUgbGlnaHRib3ggY2FuIGJlIHByb3Blcmx5IG1hbmFnZWQgdGhyb3VnaCBpdHMgbGlmZWN5Y2xlLlxuICogXG4gKiBJdHMgaW50ZW5kZWQgdXNlIGlzIHRvIHByb3ZpZGUgYSBzaW1wbGUgd2F5IHRvIG1hbmFnZSB0aGUgdmlzaWJpbGl0eSBvZiBhIGxpZ2h0Ym94IGVsZW1lbnQuXG4gKiBJdCBhYnN0cmFjdHMgb3V0IHRoZSBwZXNreSBhbmltYXRpbmcgaW4tYW5kLW91dCBjb251bmRydW0gb2YgbW9kYWwtbGlrZSBlbGVtZW50cyB3aXRoIGEgQ1NTIHByb3BlcnR5LCBkaXNwbGF5IG9mIG5vbmUgKHRvIGJsb2NrL2ZsZXgvZ3JpZC9ldGMuKS5cbiAqIFNlZSByZWFkbWUgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbGlnaHRib3hFbGVtZW50IC0gQW55IEhUTUwgY29udGFpbmVyIGVsZW1lbnQgKGllLiwgPGRpdj4pIHRvIGluaXRpYWxpemUgYXMgYSBtb2RhbC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IEFuIG9iamVjdCBjb250YWluaW5nIG1ldGhvZHMgdG8gbWFuYWdlIHRoZSBsaWdodGJveGVzJ3MgdmlzaWJpbGl0eSBhbmQgc3RhdGUuXG4gKiBcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgaW52YWxpZC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgbm90IGEgdmFsaWQgSFRNTCBlbGVtZW50LlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBsaWdodGJveCBpcyBhbHJlYWR5IHZpc2libGUuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgYSBsaXN0ZW5lciBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIGxpZ2h0Ym94LlxuICogQHRocm93cyB7RXJyb3J9IElmIGEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byBsaWdodGJveCdzIGNsb3NlIGJ1dHRvbi5cbiAqIFxuICogQGV4YW1wbGVcbiAqID8gQXNzdW1lICdteUxpZ2h0Ym94JyBpcyBhIERPTSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgZGlhbG9nLlxuICogY29uc3QgbGlnaHRCb3hDb250cm9sbGVyID0gZHNDcmVhdGVMaWdodGJveENvbnRyb2xsZXIobXlMaWdodGJveCk7XG4gKiBcbiAqID8gVG8gb3BlbiB0aGUgbGlnaHRib3hcbiAqIGxpZ2h0Qm94Q29udHJvbGxlci5vcGVuTGlnaHRib3goKTtcbiAqIFxuICogPyBUbyBjbG9zZSB0aGUgbGlnaHRib3hcbiAqIGxpZ2h0Qm94Q29udHJvbGxlci5jbG9zZUxpZ2h0Ym94KCk7XG4gKiBcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZHNDcmVhdGVMaWdodGJveENvbnRyb2xsZXIobGlnaHRib3hFbGVtZW50KSB7XG5cblx0ZnVuY3Rpb24gZXhhbWluZUFyZ3VtZW50T25DYWxsKCkge1xuXHRcdGlmICghbGlnaHRib3hFbGVtZW50KSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGRzQ3JlYXRlRGlhbG9nQ29udHJvbGxlciBmdW5jdGlvbi5gKTtcblx0XHRpZiAoIShsaWdodGJveEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHRocm93IG5ldyBFcnJvcihgVGhlIHByb3ZpZGVkIGFyZ3VtZW50IGlzIG5vdCBhIHZhbGlkIEhUTUwgZWxlbWVudC5gKTtcblx0fVxuXG5cdC8vIPCflLQgY2hlY2tQb2ludFxuXHRleGFtaW5lQXJndW1lbnRPbkNhbGwoKTsgLy8gISBjaGVja1BvaW50XG5cdC8vIPCfn6IgY2xlYXJlZFN1Y2Nlc3NmdWxseSAhXG5cblx0aW5pdGlhbGl6ZUFzTW9kYWwobGlnaHRib3hFbGVtZW50KTtcblxuXHRjb25zdCBsaWdodEJveFNlbGVjdG9yID0gZHNHZXRTZWxlY3RvcihsaWdodGJveEVsZW1lbnQpO1xuXHRjb25zdCBjbG9zZUJ1dHRvbiA9IGxpZ2h0Ym94RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZHMtY2xvc2UtYnV0dG9uJyk7XG5cblx0ZXhhbWluZUNsb3NlQnV0dG9uKGNsb3NlQnV0dG9uLCBsaWdodEJveFNlbGVjdG9yKTtcblx0aW5pdGlhbGl6ZUNsb3NlQnV0dG9uKGNsb3NlQnV0dG9uKTtcblxuXHRsZXQgbGlnaHRib3hTdGF0ZSA9IHtcblx0XHRtb2RhbE9wZW46IGZhbHNlLFxuXHRcdGxpc3RlbmVyQXR0YWNoZWQ6IGZhbHNlLFxuXHRcdGVzY2FwZUtleUxpc3RlbmVyQXR0YWNoZWQ6IGZhbHNlLFxuXHRcdGNsb3NlQnV0dG9uU3RhdGU6IHtcblx0XHRcdGxpc3RlbmVyQXR0YWNoZWQ6IGZhbHNlLFxuXHRcdH1cblx0fTtcblxuXHRjb25zdCBjbGVhbkxpZ2h0Qm94ID0gKCkgPT4ge1xuXHRcdGxpZ2h0Ym94RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjbG9zaW5nJyk7XG5cdFx0bGlnaHRib3hFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcblxuXHRcdHRvZ2dsZU1vZGFsQXR0cmlidXRlcyhsaWdodGJveEVsZW1lbnQpO1xuXHRcdHRvZ2dsZUNsb3NlQnV0dG9uTGlzdGVuZXIobGlnaHRib3hTdGF0ZS5jbG9zZUJ1dHRvblN0YXRlLmxpc3RlbmVyQXR0YWNoZWQsIGNsb3NlQnV0dG9uLCBjbG9zZUxpZ2h0Ym94KTtcblx0XHR0b2dnbGVFc2NhcGVLZXlMaXN0ZW5lcihsaWdodGJveFN0YXRlLmVzY2FwZUtleUxpc3RlbmVyQXR0YWNoZWQsIGNsb3NlQnV0dG9uKTtcblxuXHRcdGxpZ2h0Ym94RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBjbGVhbkxpZ2h0Qm94KTtcblxuXHRcdHRvZ2dsZU1vZGFsU3RhdGUobGlnaHRib3hTdGF0ZSk7XG5cdH1cblxuXHRjb25zdCBjbG9zZUxpZ2h0Ym94ID0gKCkgPT4ge1xuXHRcdGxpZ2h0Ym94RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjbG9zaW5nJyk7XG5cdFx0bGlnaHRib3hFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGNsZWFuTGlnaHRCb3gpO1xuXHR9XG5cblx0Y29uc3QgaW5zcGVjdExpZ2h0Ym94ID0gKCkgPT4ge1xuXHRcdGlmIChsaWdodGJveEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJykpIHRocm93IG5ldyBFcnJvcihgVGhlIGZvbGxvd2luZyBsaWdodGJveCBpcyBhbHJlYWR5IHZpc2libGU6ICR7bGlnaHRCb3hTZWxlY3Rvcn0uYCk7XG5cdFx0aWYgKGxpZ2h0Ym94U3RhdGUubGlzdGVuZXJBdHRhY2hlZCkgdGhyb3cgbmV3IEVycm9yKGBBIGxpc3RlbmVyIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhlIGxpZ2h0Ym94IGVsZW1lbnQ6ICR7bGlnaHRCb3hTZWxlY3Rvcn0uYCk7XG5cdFx0aWYgKGxpZ2h0Ym94U3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkKSB0aHJvdyBuZXcgRXJyb3IoYEEgbGlzdGVuZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byB0aGUgY2xvc2UgYnV0dG9uIG9mIHRoZSBsaWdodGJveDogJHtsaWdodEJveFNlbGVjdG9yfS5gKTtcblx0fVxuXG5cdGNvbnN0IG9wZW5MaWdodGJveCA9ICgpID0+IHtcblx0XHQvLyDwn5S0IGNoZWNrUG9pbnRcblx0XHRpbnNwZWN0TGlnaHRib3goKTtcblx0XHQvLyDwn5+iIGNsZWFyZWRTdWNjZXNzZnVsbHkgIVxuXHRcdFxuXHRcdGxpZ2h0Ym94RWxlbWVudC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG5cblx0XHR0b2dnbGVNb2RhbEF0dHJpYnV0ZXMobGlnaHRib3hFbGVtZW50KTtcblx0XHR0b2dnbGVDbG9zZUJ1dHRvbkxpc3RlbmVyKGxpZ2h0Ym94U3RhdGUuY2xvc2VCdXR0b25TdGF0ZS5saXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbiwgY2xvc2VMaWdodGJveCk7XG5cdFx0dG9nZ2xlRXNjYXBlS2V5TGlzdGVuZXIobGlnaHRib3hTdGF0ZS5lc2NhcGVLZXlMaXN0ZW5lckF0dGFjaGVkLCBjbG9zZUJ1dHRvbik7XG5cblx0XHR0b2dnbGVNb2RhbFN0YXRlKGxpZ2h0Ym94U3RhdGUpO1xuXHR9XG5cblx0cmV0dXJuIHtcblx0XHRvcGVuTGlnaHRib3gsXG5cdFx0Y2xvc2VMaWdodGJveFxuXHR9XG59XG5cbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gPyBGdW4gZmFjdDogXG4vLyA/IExpZ2h0Ym94ZXMgYXJlIG5hbWVkIGFmdGVyIHRoZSBsaWdodGJveCB0aGF0IHBob3RvZ3JhcGhlcnMgdXNlIHRvIHZpZXcgc2xpZGVzLiBcbi8vID8gT2vigKYgbWF5YmUgaXQncyBub3QgdGhhdCBmdW4uIiwiaW1wb3J0IHsgY3JlYXRlU3BsaXRUZXh0RnJhZ21lbnQgfSBmcm9tIFwiLi9zcGxpdC10ZXh0XCI7XG5cbi8vIPCfkq0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZnVuY3Rpb24gcmFuZG9taXplQ2hhcmFjdGVyTG9jYXRpb25zKG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzKSB7XG4gIG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzLmZvckVhY2goY2hhcmFjdGVyID0+IHtcbiAgICBjb25zdCByYW5kb21OdW1iZXIgPSBNYXRoLnJhbmRvbSgpO1xuXG4gICAgaWYgKHJhbmRvbU51bWJlciA+PSAwICYmIHJhbmRvbU51bWJlciA8IDAuMjUpIHtcbiAgICAgIGNoYXJhY3Rlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzMzKX1weCwgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMzMpfXB4KWA7XG4gICAgfSBlbHNlIGlmIChyYW5kb21OdW1iZXIgPj0gMC4yNSAmJiByYW5kb21OdW1iZXIgPCAwLjUpIHtcbiAgICAgIGNoYXJhY3Rlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogLTMzMyl9cHgsICR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogLTMzMyl9cHgpYDtcbiAgICB9IGVsc2UgaWYgKHJhbmRvbU51bWJlciA+PSAwLjUgJiYgcmFuZG9tTnVtYmVyIDwgMC43NSkge1xuICAgICAgY2hhcmFjdGVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMzMpfXB4LCAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIC0zMzMpfXB4KWA7XG4gICAgfSBlbHNlIHsgLy8gPyByYW5kb21OdW1iZXIgPD0gMC4yNVxuICAgICAgY2hhcmFjdGVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAtMzMzKX1weCwgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMzMpfXB4KWA7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE1vZGFsTGlzdGVuZXJzKCkge1xuICBjb25zdCBhZGRMaXN0ZW5lckZvck1vZGFsT3BlbiA9IChub25XaGl0ZXNwYWNlQ2hhcmFjdGVycykgPT4ge1xuICAgIGNvbnN0IG9wZW5Nb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcGVuLW1vZGFsLWJ1dHRvbicpO1xuXG4gICAgb3Blbk1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMuZm9yRWFjaChub25XaGl0ZXNwYWNlQ2hhcmFjdGVyID0+IG5vbldoaXRlc3BhY2VDaGFyYWN0ZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgwLCAwKScpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGFkZExpc3RlbmVyRm9yTW9kYWxDbG9zZSA9IChub25XaGl0ZXNwYWNlQ2hhcmFjdGVycykgPT4ge1xuICAgIGNvbnN0IGNsb3NlTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHMtY2xvc2UtYnV0dG9uJyk7XG5cbiAgICBjbG9zZU1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgcmFuZG9taXplQ2hhcmFjdGVyTG9jYXRpb25zKG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXJhY3Rlci5ub24td2hpdGVzcGFjZScpO1xuICBhZGRMaXN0ZW5lckZvck1vZGFsT3Blbihub25XaGl0ZXNwYWNlQ2hhcmFjdGVycyk7XG4gIGFkZExpc3RlbmVyRm9yTW9kYWxDbG9zZShub25XaGl0ZXNwYWNlQ2hhcmFjdGVycyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplTW9kYWxDb250ZW50KCkge1xuICBjb25zdCBnZXRTcGxpdEVsZW1lbnRGcmFnbWVudCA9IChlbGVtZW50VG9TcGxpdCwgZWxlbWVudFRvQXBwZW5kRnJhZ21lbnQsIGlkZW50aWZpZXJGb3JFYWNoU3BsaXRFbGVtZW50KSA9PiB7XG4gICAgZWxlbWVudFRvQXBwZW5kRnJhZ21lbnQuYXBwZW5kQ2hpbGQoY3JlYXRlU3BsaXRUZXh0RnJhZ21lbnQoZWxlbWVudFRvU3BsaXQsIGlkZW50aWZpZXJGb3JFYWNoU3BsaXRFbGVtZW50KSk7XG5cbiAgICByZXR1cm4gZWxlbWVudFRvQXBwZW5kRnJhZ21lbnQ7XG4gIH07XG5cbiAgY29uc3QgaWRlbnRpZnlOb25XaGl0ZXNwYWNlQ2hhcmFjdGVycyA9IChzcGxpdFRleHQpID0+IHtcbiAgICBjb25zdCBub25XaGl0ZXNwYWNlQ2hhcmFjdGVycyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxpdFRleHQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gc3BsaXRUZXh0LmNoaWxkcmVuW2ldO1xuICAgICAgaWYgKGNoaWxkLnRleHRDb250ZW50LnRyaW0oKSAhPT0gJycpIG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzLnB1c2goY2hpbGQpO1xuICAgIH1cblxuICAgIG5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzLmZvckVhY2goY2hhcmFjdGVyID0+IGNoYXJhY3Rlci5jbGFzc0xpc3QuYWRkKCdub24td2hpdGVzcGFjZScpKTtcblxuICAgIHJldHVybiBub25XaGl0ZXNwYWNlQ2hhcmFjdGVycztcbiAgfTtcblxuICBjb25zdCByZXBsYWNlRWxlbWVudCA9IChjb250YWluZXIsIG5ld0VsZW1lbnQsIG9sZEVsZW1lbnQpID0+IHtcbiAgICBjb250YWluZXIucmVwbGFjZUNoaWxkKG5ld0VsZW1lbnQsIG9sZEVsZW1lbnQpO1xuICB9XG5cbiAgY29uc3QgcHJlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2MtY29udGFpbmVyJyk7XG4gIGNvbnN0IHByZSA9IHByZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdwcmUnKTtcblxuICBjb25zdCBuZXdQcmUgPSBnZXRTcGxpdEVsZW1lbnRGcmFnbWVudChwcmUsIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ByZScpLCAnY2hhcmFjdGVyJyk7XG4gIHJlcGxhY2VFbGVtZW50KHByZUNvbnRhaW5lciwgbmV3UHJlLCBwcmUpO1xuXG4gIHJhbmRvbWl6ZUNoYXJhY3RlckxvY2F0aW9ucyhpZGVudGlmeU5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzKG5ld1ByZSkpO1xufSIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGxpdFRleHRGcmFnbWVudChlbGVtZW50LCBpZCkge1xuICBjb25zdCBnZXROb25XaGl0ZXNwYWNlQ2hhcmFjdGVycyA9IChlbGVtZW50KSA9PiB7XG5cbiAgICBcbiAgfTtcblxuICBjb25zdCBzcGxpdFRleHRGcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgY29uc3QgdGV4dCA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG5cbiAgdGV4dC5zcGxpdCgnJykuZm9yRWFjaCgoY2hhcmFjdGVyLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGNoYXJhY3RlclNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgY2hhcmFjdGVyU3Bhbi5zZXRBdHRyaWJ1dGUoJ2lkJywgYCR7aWR9LSR7aW5kZXggKyAxfWApO1xuICAgIGNoYXJhY3RlclNwYW4uY2xhc3NMaXN0LmFkZCgnY2hhcmFjdGVyJyk7XG5cbiAgICAvLyBVc2UgYSBub24tYnJlYWtpbmcgc3BhY2UgZm9yIHNwYWNlcyB0byBlbnN1cmUgdGhleSBhcmUgcHJlc2VydmVkXG4gICAgY2hhcmFjdGVyU3Bhbi50ZXh0Q29udGVudCA9IGNoYXJhY3RlciA9PT0gJyAnID8gJ1xcdTAwQTAnIDogY2hhcmFjdGVyO1xuXG4gICAgc3BsaXRUZXh0RnJhZ21lbnQuYXBwZW5kQ2hpbGQoY2hhcmFjdGVyU3Bhbik7XG4gIH0pO1xuXG4gIHJldHVybiBzcGxpdFRleHRGcmFnbWVudDtcbn0iLCJpbXBvcnQgeyBkc0NyZWF0ZURpYWxvZ0NvbnRyb2xsZXIgfSBmcm9tIFwiLi9kaXNwbGF5U3R1ZmZcIjtcblxuaW1wb3J0IHsgaW5pdGlhbGl6ZU1vZGFsQ29udGVudCwgYWRkTW9kYWxMaXN0ZW5lcnMgfSBmcm9tICcuL2ZsdWZmJzsgXG5pbXBvcnQgJy4vc2Fzcy9tYWluLnNjc3MnO1xuXG5mdW5jdGlvbiBpbml0QXBwKCkge1xuICBpbml0aWFsaXplTW9kYWxDb250ZW50KCk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgYWRkTW9kYWxMaXN0ZW5lcnMpO1xufTtcblxuaW5pdEFwcCgpO1xuXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyDwn5KtIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vID8gZGlzcGxheVN0dWZmLmpzXG4vLyA/IDxkaWFsb2c+IGRlbW86XG5cbmNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpYWxvZycpO1xuY29uc3QgZGlhbG9nQ29udHJvbGxlciA9IGRzQ3JlYXRlRGlhbG9nQ29udHJvbGxlcihkaWFsb2cpO1xuXG5jb25zdCBvcGVuTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3Blbi1tb2RhbC1idXR0b24nKTtcblxub3Blbk1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBkaWFsb2dDb250cm9sbGVyLm9wZW5EaWFsb2coKTtcbn0pOyJdLCJuYW1lcyI6WyJ0b2dnbGVFc2NhcGVLZXlMaXN0ZW5lciIsImlzTGlzdGVuZXJBdHRhY2hlZCIsImNsb3NlQnV0dG9uIiwibW9kaWZpZWRFc2NhcGVLZXlDYWxsYmFjayIsImV2ZW50Iiwia2V5IiwibW9kYWxTdGF0ZSIsIm9wZW4iLCJwcmV2ZW50RGVmYXVsdCIsImNsaWNrIiwid2luZG93IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0b2dnbGVDbG9zZUJ1dHRvbkxpc3RlbmVyIiwiY2xvc2VNb2RhbENhbGxiYWNrIiwidG9nZ2xlTW9kYWxTdGF0ZSIsIkVycm9yIiwibGlzdGVuZXJBdHRhY2hlZCIsImVzY2FwZUtleUxpc3RlbmVyQXR0YWNoZWQiLCJjbG9zZUJ1dHRvblN0YXRlIiwidG9nZ2xlTW9kYWxBdHRyaWJ1dGVzIiwibW9kYWxFbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwicmFuZG9taXplQ2hhcmFjdGVyTG9jYXRpb25zIiwibm9uV2hpdGVzcGFjZUNoYXJhY3RlcnMiLCJmb3JFYWNoIiwiY2hhcmFjdGVyIiwicmFuZG9tTnVtYmVyIiwiTWF0aCIsInJhbmRvbSIsInN0eWxlIiwidHJhbnNmb3JtIiwiY29uY2F0IiwiZmxvb3IiLCJlbGVtZW50VG9TcGxpdCIsImVsZW1lbnRUb0FwcGVuZEZyYWdtZW50IiwiZWxlbWVudCIsInNwbGl0VGV4dEZyYWdtZW50IiwibmV3RWxlbWVudCIsIm9sZEVsZW1lbnQiLCJwcmVDb250YWluZXIiLCJwcmUiLCJuZXdQcmUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwidGV4dENvbnRlbnQiLCJzcGxpdCIsImluZGV4IiwiY2hhcmFjdGVyU3BhbiIsImNsYXNzTGlzdCIsImFkZCIsInJlcGxhY2VDaGlsZCIsInNwbGl0VGV4dCIsImkiLCJjaGlsZHJlbiIsImxlbmd0aCIsImNoaWxkIiwidHJpbSIsInB1c2giLCJpZGVudGlmeU5vbldoaXRlc3BhY2VDaGFyYWN0ZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsIm5vbldoaXRlc3BhY2VDaGFyYWN0ZXIiLCJhZGRMaXN0ZW5lckZvck1vZGFsT3BlbiIsImFkZExpc3RlbmVyRm9yTW9kYWxDbG9zZSIsImRpYWxvZ0NvbnRyb2xsZXIiLCJkaWFsb2dFbGVtZW50IiwiSFRNTEVsZW1lbnQiLCJ0YWdOYW1lIiwiZXhhbWluZUFyZ3VtZW50T25DYWxsIiwiZGlhbG9nU2VsZWN0b3IiLCJpZCIsImNsYXNzTmFtZSIsImpvaW4iLCJkc0dldFNlbGVjdG9yIiwic2VsZWN0b3IiLCJleGFtaW5lQ2xvc2VCdXR0b24iLCJpbml0aWFsaXplQ2xvc2VCdXR0b24iLCJkaWFsb2dTdGF0ZSIsInNhbml0aXplRGlhbG9nIiwicmVtb3ZlIiwiY2xvc2UiLCJjbG9zZURpYWxvZyIsIm9wZW5EaWFsb2ciLCJpbnNwZWN0RGlhbG9nIiwic2hvd01vZGFsIiwiZHNDcmVhdGVEaWFsb2dDb250cm9sbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==